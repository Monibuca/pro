import{d as S,k as p,w,U as h,V as C,f as l,$ as s,a8 as D,a4 as i,_,u as e,E as m,a3 as N}from"./vue-c6b19427.js";import{ag as f}from"./index-aad18627.js";import"./dayjs-4778c158.js";import{a as g}from"./index-95df8ea5.js";import{D as V,p as k}from"./index-1f047b96.js";import{V as I}from"./jb4-eb5abf22.js";import{i as P,a as y}from"./gb28281-f80f93de.js";import{a as B,D as u}from"./index-c06c8e4e.js";import{C as z}from"./Card-8c962093.js";const $={class:"h-full w-full flex flex-items-center"},E={class:"text-center"},T=S({__name:"play",props:{path:null,id:null,deviceName:null,deviceID:null,channelName:null},setup(a){const o=a,d={fontWeight:"bold"},v=p("http-flv"),n=p("");w([()=>o.id,()=>o.path],([t,c])=>{c?n.value=c:t&&P({id:o.id,channel:o.deviceID}).finally(()=>{n.value=`${o.id}/${o.deviceID}`})},{immediate:!0});const r=()=>{const t=n.value.split("/");return{id:t[0],channel:t[1]}},b=async t=>{f.destroy(),await y({id:r().id,channel:r().channel,ptzcmd:t}).then(async c=>{f.success("指令发送成功"),x()}).catch(c=>{f.success("指令发送失败")})},x=()=>{setTimeout(async()=>{await y({id:r().id,channel:r().channel,ptzcmd:k()})})};return(t,c)=>(h(),C("div",$,[l(I,{videoShadow:!0,streamPath:n.value,format:v.value,class:"flex-1 m-r-10px"},{default:s(()=>[D("div",E,i(n.value),1)]),_:1},8,["streamPath","format"]),l(e(z),{bordered:!1,bodyStyle:{height:"100%",width:"250px"}},{default:s(()=>[l(V,{hanldeClick:b,allowed:!!n.value},null,8,["allowed"]),a.id?(h(),_(e(B),{key:0,column:1,class:"mt-20px",layout:"vertical"},{default:s(()=>[l(e(u),{class:"!pb-8px",labelStyle:e(d),label:"设备名称"},{default:s(()=>[m(i(a.deviceName||"--"),1)]),_:1},8,["labelStyle"]),l(e(u),{class:"!pb-8px",labelStyle:e(d),label:"设备编号"},{default:s(()=>[m(i(a.id||"--"),1)]),_:1},8,["labelStyle"]),l(e(u),{class:"!pb-8px",labelStyle:e(d),label:"通道名称"},{default:s(()=>[m(i(a.channelName||"--"),1)]),_:1},8,["labelStyle"]),l(e(u),{class:"!pb-8px",labelStyle:e(d),label:"通道编号"},{default:s(()=>[m(i(a.deviceID||"--"),1)]),_:1},8,["labelStyle"])]),_:1})):N("",!0)]),_:1})]))}}),H=a=>{g({content:()=>l(T,a,null),modalConfig:{width:"100%",wrapClassName:"full-antdv-modal",destroyOnClose:!0,footer:null}})};export{H as u};
