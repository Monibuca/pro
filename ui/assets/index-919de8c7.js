import{d as h,f as e,e as K,k as v,w as T,U as b,_ as I,$ as l,a8 as x,u as t,E as g,V as P,F as V,a7 as O,a4 as E,a3 as L}from"./vue-c6b19427.js";import{g as R,a as $,u as z}from"./global-298233d3.js";import{u as q}from"./formily-e2a545c0.js";import"./dayjs-4778c158.js";import{u as B,d as M,a as w,P as k,M as J,Y as F,I as N,aa as j,J as A,af as U,ag as Y}from"./index-aad18627.js";import{C as m}from"./Card-8c962093.js";import{A as H}from"./index-488f74d0.js";import"./index-7bab0ec1.js";import"./LeftOutlined-b0277a64.js";import"./index-80191c24.js";import"./Group-e4257df4.js";import"./index-e6a754fb.js";import"./index-2a404b4e.js";import"./useFlexGapSupport-8d02a6ec.js";import"./index-76e12268.js";import"./scrollTo-4880713e.js";import"./mockjs-890b569b.js";var Q=function(){return{prefixCls:String,title:k.any,description:k.any,avatar:k.any}};const S=h({compatConfig:{MODE:3},name:"ACardMeta",props:Q(),slots:["title","description","avatar"],setup:function(o,p){var n=p.slots,f=B("card",o),r=f.prefixCls;return function(){var c=M({},"".concat(r.value,"-meta"),!0),s=w(n,o,"avatar"),y=w(n,o,"title"),_=w(n,o,"description"),i=s?e("div",{class:"".concat(r.value,"-meta-avatar")},[s]):null,d=y?e("div",{class:"".concat(r.value,"-meta-title")},[y]):null,a=_?e("div",{class:"".concat(r.value,"-meta-description")},[_]):null,C=d||a?e("div",{class:"".concat(r.value,"-meta-detail")},[d,a]):null;return e("div",{class:c},[i,C])}}});var W=function(){return{prefixCls:String,hoverable:{type:Boolean,default:!0}}};const D=h({compatConfig:{MODE:3},name:"ACardGrid",__ANT_CARD_GRID:!0,props:W(),setup:function(o,p){var n=p.slots,f=B("card",o),r=f.prefixCls,c=K(function(){var s;return s={},M(s,"".concat(r.value,"-grid"),!0),M(s,"".concat(r.value,"-grid-hoverable"),o.hoverable),s});return function(){var s;return e("div",{class:c.value},[(s=n.default)===null||s===void 0?void 0:s.call(n)])}}});m.Meta=S;m.Grid=D;m.install=function(u){return u.component(m.name,m),u.component(S.name,S),u.component(D.name,D),u};const X={class:"flex h-full"},Z={class:"w-700px"},ee={class:"flex justify-between p-4px",style:{background:"var(--layout-background)"}},ae={key:0,class:"absolute top-40% left-50%"},te=h({name:"Config"}),he=h({...te,setup(u){const o=v([]);R().then(i=>{Object.keys(i).length&&(o.value=Object.entries(i).map(([d,a])=>({name:a.Name,version:`版本: ${a.Version}`,disabled:a.Disabled})))});const p=v(null),n=v(),f=v(!1),r=v(["global-sub","plugin-sub"]),c=v(["global"]);T(c,i=>{const d={name:i[0]==="global"?"":i[0],formily:"1"};f.value=!0,$(d).then(a=>{const{FormilyForm:C,form:G}=q({schema:a});p.value=C,n.value=G}).finally(()=>{f.value=!1})},{immediate:!0});const s=async()=>{if(!n.value.modified)return Y.warning("您尚未修改过任何配置，无需保存！");const i=await n.value.submit();z({name:c.value[0]},i)},y=()=>document.querySelector(".plugin-list"),_=()=>{window.open("https://m7s.live/guide/plugins/"+c.value[0].toLowerCase()+".html","_blank")};return(i,d)=>(b(),I(t(m),{class:"flex-center h-100% overflow-hidden",bodyStyle:{height:"100%"}},{default:l(()=>[x("div",X,[e(t(J),{selectedKeys:c.value,openKeys:r.value,mode:"inline",inlineCollapsed:!1,onSelect:d[0]||(d[0]=({key:a})=>c.value=[a]),class:"w-180px h-100% overflow-y-auto overflow-x-hidden"},{default:l(()=>[e(t(F),{key:"global-sub"},{title:l(()=>[g("全局配置")]),default:l(()=>[e(t(N),{key:"global"},{default:l(()=>[g(" global ")]),_:1})]),_:1}),e(t(F),{key:"plugin-sub"},{title:l(()=>[g("插件配置")]),default:l(()=>[(b(!0),P(V,null,O(o.value,a=>(b(),I(t(N),{key:a.name,disabled:a.disabled},{default:l(()=>[g(E(a.name),1)]),_:2},1032,["disabled"]))),128))]),_:1})]),_:1},8,["selectedKeys","openKeys"]),e(t(m),{bordered:!1,bodyStyle:{paddingTop:0},class:"plugin-list h-full overflow-y-auto overflow-x-hidden relative"},{default:l(()=>[x("div",Z,[e(t(H),{offsetTop:2,target:y,class:"mb-10px"},{default:l(()=>[x("div",ee,[e(t(j),{type:"link",onClick:s},{default:l(()=>[e(t(A),{icon:"tabler:hand-click",class:"v-text-bottom"}),g(" 点我保存配置 ")]),_:1}),e(t(j),{type:"link",onClick:_},{default:l(()=>[g(" 配置文档 "),e(t(A),{icon:"fluent:window-new-16-filled",class:"v-text-bottom"})]),_:1})])]),_:1}),e(t(p)),f.value?(b(),P("div",ae,[e(t(U),{class:"zIndex-100",size:"large"})])):L("",!0)])]),_:1})])]),_:1}))}});export{he as default};
