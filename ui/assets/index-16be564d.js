import{d as p,am as S,U as _,_ as w,$ as r,f as i,u as e,E as m}from"./vue-c6b19427.js";import{an as y,a2 as g,am as x,B as n,ap as C}from"./index-5bf97ded.js";import{u as k}from"./index-9bf17547.js";import"./dayjs-4778c158.js";import{_ as P}from"./scroll-tip.vue_vue_type_script_setup_true_lang-951434a5.js";import{c as b}from"./global-d9381641.js";import{c as B}from"./utils-52156a92.js";import{s as D}from"./state-1f6a9fc1.js";import{u as v}from"./usePlay-7315fadc.js";import{S as O}from"./index-ae1d50c1.js";import{C as T}from"./Card-02b71e3c.js";import"./mockjs-890b569b.js";import"./index-ffde723c.js";import"./index-e56fb6da.js";import"./index-0a655570.js";import"./index-c694a60c.js";import"./useFlexGapSupport-dcef435e.js";import"./jb4-5411b960.js";import"./gb28281-d411f3dc.js";import"./index-6330dd01.js";const $=p({name:"StreamPush"}),q=p({...$,setup(E){y.renderer.add("State",{renderDefault(t,o){const{row:a}=o;return D[a.State]}});const l=k(),d=t=>{t.length>1&&(t=t.sort((o,a)=>Date.parse(o.StartTime)-Date.parse(a.StartTime))),l.tableRef.reloadData(t)};let s;function f(){s=b(t=>{d(t.Streams||[])})}f(),S(t=>{const{path:o}=t;o!=="/overview/detail"&&(s==null||s())});const u={maxHeight:"100%",rowConfig:{keyField:"Path",useKey:!0},columnConfig:{useKey:!0},columns:[{field:"Path",title:"StreamPath",showOverflow:"tooltip",minWidth:"340px"},{field:"State",title:"状态",showOverflow:"tooltip",cellRender:{name:"State"}},{field:"Type",title:"类型",showOverflow:"tooltip"},{field:"Subscribers",title:"订阅数量",showOverflow:"tooltip",width:"100px"},{field:"StartTime",title:"创建时间",minWidth:"100px",formatter:({cellValue:t})=>C.toDateString(new Date(t),"yyyy-MM-dd HH:ss:mm")},{field:"BPS",title:"BPS",formatter:({cellValue:t})=>`${B(t)}/s`},{field:"operate",title:"操作",width:"120px",align:"center",slots:{default:"operate"}}],data:[]},c=g(),h=t=>{c(`/stream-push/detail/${encodeURIComponent(t)}`)};return(t,o)=>(_(),w(e(T),{bordered:!1,bodyStyle:{padding:"10px",height:"100%"},style:{height:"100% - 100px)"}},{default:r(()=>[i(e(P),{windowWidth:1716}),i(e(x),{uid:e(l).uid,gridOptions:e(u)},{operate:r(({row:a})=>[i(e(O),null,{default:r(()=>[i(e(n),{size:"small",type:"link",onClick:()=>e(v)({path:a.Path})},{default:r(()=>[m(" 播放 ")]),_:2},1032,["onClick"]),i(e(n),{size:"small",type:"link",onClick:()=>h(a.Path)},{default:r(()=>[m(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["uid","gridOptions"])]),_:1}))}});export{q as default};
