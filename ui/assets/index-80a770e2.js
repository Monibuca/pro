import{d as p,am as S,U as _,_ as w,$ as i,f as r,u as e,E as m}from"./vue-c6b19427.js";import{ai as y,W as g,ah as x,aa as n,ak as C}from"./index-aad18627.js";import{u as k}from"./index-95df8ea5.js";import"./dayjs-4778c158.js";import{_ as P}from"./scroll-tip.vue_vue_type_script_setup_true_lang-3454ae16.js";import{c as b}from"./global-298233d3.js";import{c as D}from"./utils-a0cf7536.js";import{s as v}from"./state-fcd9f1ba.js";import{u as B}from"./usePlay-f4c31f96.js";import{S as O}from"./index-bb28e965.js";import{C as T}from"./Card-8c962093.js";import"./mockjs-890b569b.js";import"./index-1f047b96.js";import"./index-f2e45ddb.js";import"./index-7f8dfd5e.js";import"./index-7bab0ec1.js";import"./useFlexGapSupport-8d02a6ec.js";import"./jb4-eb5abf22.js";import"./gb28281-f80f93de.js";import"./index-c06c8e4e.js";const $=p({name:"StreamPush"}),q=p({...$,setup(E){y.renderer.add("State",{renderDefault(t,o){const{row:a}=o;return v[a.State]}});const l=k(),d=t=>{t.length>1&&(t=t.sort((o,a)=>Date.parse(o.StartTime)-Date.parse(a.StartTime))),l.tableRef.reloadData(t)};let s;function f(){s=b(t=>{d(t.Streams||[])})}f(),S(t=>{const{path:o}=t;o!=="/overview/detail"&&(s==null||s())});const u={maxHeight:"100%",rowConfig:{keyField:"Path",useKey:!0},columnConfig:{useKey:!0},columns:[{field:"Path",title:"StreamPath",showOverflow:"tooltip",minWidth:"340px"},{field:"State",title:"状态",showOverflow:"tooltip",cellRender:{name:"State"}},{field:"Type",title:"类型",showOverflow:"tooltip"},{field:"Subscribers",title:"订阅数量",showOverflow:"tooltip",width:"100px"},{field:"StartTime",title:"创建时间",minWidth:"100px",formatter:({cellValue:t})=>C.toDateString(new Date(t),"yyyy-MM-dd HH:ss:mm")},{field:"BPS",title:"BPS",formatter:({cellValue:t})=>`${D(t)}/s`},{field:"operate",title:"操作",width:"120px",align:"center",slots:{default:"operate"}}],data:[]},c=g(),h=t=>{c(`/stream-push/detail/${encodeURIComponent(t)}`)};return(t,o)=>(_(),w(e(T),{bordered:!1,bodyStyle:{padding:"10px",height:"100%"},style:{height:"100% - 100px)"}},{default:i(()=>[r(e(P),{windowWidth:1716}),r(e(x),{uid:e(l).uid,gridOptions:e(u)},{operate:i(({row:a})=>[r(e(O),null,{default:i(()=>[r(e(n),{size:"small",type:"link",onClick:()=>e(B)({path:a.Path})},{default:i(()=>[m(" 播放 ")]),_:2},1032,["onClick"]),r(e(n),{size:"small",type:"link",onClick:()=>h(a.Path)},{default:i(()=>[m(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["uid","gridOptions"])]),_:1}))}});export{q as default};
