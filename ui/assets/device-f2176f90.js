import{bF as Ie}from"./index-a3873c66.js";import{O as _i}from"./vue-db0e7353.js";import"./dayjs-4778c158.js";import{b as Ei}from"./global-7782a904.js";function mt(){return Ie.get({url:"/list"},{errorMessageMode:"message"})}function qi(h){return Ie.get({url:"/invite",params:h},{errorMessageMode:"none"})}function Gi(h){return Ie.get({url:"/bye",params:h},{errorMessageMode:"message"})}function Xi(h){return Ie.get({url:"/records",params:h},{errorMessageMode:"message"})}function Ji(h){return Ie.get({url:"/control",params:h},{errorMessageMode:"message"})}var Pe=(h=>(h.VideoCodecInfo="videoCodecInfo",h.VideoFrame="videoFrame",h.Error="error",h))(Pe||{}),Te=(h=>(h.AudioCodecInfo="audioCodecInfo",h.AudioFrame="audioFrame",h.Error="error",h))(Te||{}),Ne={},bi={get exports(){return Ne},set exports(h){Ne=h}};(function(h){var a=Object.prototype.hasOwnProperty,o="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(o=!1));function v(S,m,_){this.fn=S,this.context=m,this.once=_||!1}function g(S,m,_,T,j){if(typeof _!="function")throw new TypeError("The listener must be a function");var L=new v(_,T||S,j),I=o?o+m:m;return S._events[I]?S._events[I].fn?S._events[I]=[S._events[I],L]:S._events[I].push(L):(S._events[I]=L,S._eventsCount++),S}function w(S,m){--S._eventsCount===0?S._events=new d:delete S._events[m]}function A(){this._events=new d,this._eventsCount=0}A.prototype.eventNames=function(){var m=[],_,T;if(this._eventsCount===0)return m;for(T in _=this._events)a.call(_,T)&&m.push(o?T.slice(1):T);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(_)):m},A.prototype.listeners=function(m){var _=o?o+m:m,T=this._events[_];if(!T)return[];if(T.fn)return[T.fn];for(var j=0,L=T.length,I=new Array(L);j<L;j++)I[j]=T[j].fn;return I},A.prototype.listenerCount=function(m){var _=o?o+m:m,T=this._events[_];return T?T.fn?1:T.length:0},A.prototype.emit=function(m,_,T,j,L,I){var $=o?o+m:m;if(!this._events[$])return!1;var D=this._events[$],ee=arguments.length,re,M;if(D.fn){switch(D.once&&this.removeListener(m,D.fn,void 0,!0),ee){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,_),!0;case 3:return D.fn.call(D.context,_,T),!0;case 4:return D.fn.call(D.context,_,T,j),!0;case 5:return D.fn.call(D.context,_,T,j,L),!0;case 6:return D.fn.call(D.context,_,T,j,L,I),!0}for(M=1,re=new Array(ee-1);M<ee;M++)re[M-1]=arguments[M];D.fn.apply(D.context,re)}else{var fr=D.length,te;for(M=0;M<fr;M++)switch(D[M].once&&this.removeListener(m,D[M].fn,void 0,!0),ee){case 1:D[M].fn.call(D[M].context);break;case 2:D[M].fn.call(D[M].context,_);break;case 3:D[M].fn.call(D[M].context,_,T);break;case 4:D[M].fn.call(D[M].context,_,T,j);break;default:if(!re)for(te=1,re=new Array(ee-1);te<ee;te++)re[te-1]=arguments[te];D[M].fn.apply(D[M].context,re)}}return!0},A.prototype.on=function(m,_,T){return g(this,m,_,T,!1)},A.prototype.once=function(m,_,T){return g(this,m,_,T,!0)},A.prototype.removeListener=function(m,_,T,j){var L=o?o+m:m;if(!this._events[L])return this;if(!_)return w(this,L),this;var I=this._events[L];if(I.fn)I.fn===_&&(!j||I.once)&&(!T||I.context===T)&&w(this,L);else{for(var $=0,D=[],ee=I.length;$<ee;$++)(I[$].fn!==_||j&&!I[$].once||T&&I[$].context!==T)&&D.push(I[$]);D.length?this._events[L]=D.length===1?D[0]:D:w(this,L)}return this},A.prototype.removeAllListeners=function(m){var _;return m?(_=o?o+m:m,this._events[_]&&w(this,_)):(this._events=new d,this._eventsCount=0),this},A.prototype.off=A.prototype.removeListener,A.prototype.addListener=A.prototype.on,A.prefixed=o,A.EventEmitter=A,h.exports=A})(bi);const gt=Symbol("instance"),Fr=Symbol("cacheResult");class Or{constructor(a,o,d){this.oldState=a,this.newState=o,this.action=d,this.aborted=!1}abort(a){this.aborted=!0,Re.call(a,this.oldState,new Error(`action '${this.action}' aborted`))}toString(){return`${this.action}ing`}}class ar extends Error{constructor(a,o,d){super(o),this.state=a,this.message=o,this.cause=d}}function Pi(h){return typeof h=="object"&&h&&"then"in h}const $e=new Map;function H(h,a,o={}){return(d,v,g)=>{const w=o.action||v;if(!o.context){const S=$e.get(d)||[];$e.has(d)||$e.set(d,S),S.push({from:h,to:a,action:w})}const A=g.value;g.value=function(...S){let m=this;if(o.context&&(m=O.get(typeof o.context=="function"?o.context.call(this,...S):o.context)),m.state===a)return m[Fr];m.state instanceof Or&&m.state.action==o.abortAction&&m.state.abort(m);let _=null;if(Array.isArray(h)?h.length==0?m.state instanceof Or&&m.state.abort(m):(typeof m.state!="string"||!h.includes(m.state))&&(_=new ar(m._state,`${m.name} ${w} to ${a} failed: current state ${m._state} not in from config`)):h!==m.state&&(_=new ar(m._state,`${m.name} ${w} to ${a} failed: current state ${m._state} not from ${h}`)),_)if(o.fail)o.fail.call(this,_);else{if(o.ignoreError)return _;throw _}const T=m.state,j=new Or(T,a,w);Re.call(m,j);const L=$=>{var D;return m[Fr]=$,j.aborted||(Re.call(m,a),(D=o.success)===null||D===void 0||D.call(this,m[Fr])),$},I=$=>{const D=$ instanceof Error?$.message:String($);if(Re.call(m,T,$),o.fail)o.fail.call(this,new ar(m._state,`action '${w}' failed :${D}`,$ instanceof Error?$:new Error(D)));else{if(o.ignoreError)return $;throw $}};try{const $=A.apply(this,S);return Pi($)?$.then(L).catch(I):L($)}catch($){I($)}}}}function Me(...h){return(a,o,d)=>{const v=d.value,g=o;d.value=function(...w){if(!h.includes(this.state.toString()))throw new ar(this.state,`${this.name} ${g} failed: current state ${this.state} not in ${h}`);return v.apply(this,w)}}}const Ti=(()=>typeof window<"u"&&window.__AFSM__?(o,d)=>{window.dispatchEvent(new CustomEvent(o,{detail:d}))}:typeof importScripts<"u"?(o,d)=>{postMessage({type:o,payload:d})}:()=>{})();function Re(h,a){const o=this._state;this._state=h;const d=h.toString();h&&this.emit(d,o),this.emit(O.STATECHANGED,h,o,a),this.updateDevTools({value:h,old:o,err:a instanceof Error?a.message:String(a)})}class O extends Ne{constructor(a,o,d){super(),this.name=a,this.groupName=o,this._state=O.INIT,a||(a=Date.now().toString(36)),d?Object.setPrototypeOf(this,d):d=Object.getPrototypeOf(this),o||(this.groupName=this.constructor.name);const v=d[gt];v?this.name=v.name+"-"+v.count++:d[gt]={name:this.name,count:0},this.updateDevTools({diagram:this.stateDiagram})}get stateDiagram(){const a=Object.getPrototypeOf(this),o=$e.get(a)||[];let d=new Set,v=[],g=[];const w=new Set,A=Object.getPrototypeOf(a);$e.has(A)&&(A.stateDiagram.forEach(m=>d.add(m)),A.allStates.forEach(m=>w.add(m))),o.forEach(({from:m,to:_,action:T})=>{typeof m=="string"?v.push({from:m,to:_,action:T}):m.length?m.forEach(j=>{v.push({from:j,to:_,action:T})}):g.push({to:_,action:T})}),v.forEach(({from:m,to:_,action:T})=>{w.add(m),w.add(_),w.add(T+"ing"),d.add(`${m} --> ${T}ing : ${T}`),d.add(`${T}ing --> ${_} : ${T} ðŸŸ¢`),d.add(`${T}ing --> ${m} : ${T} ðŸ”´`)}),g.forEach(({to:m,action:_})=>{d.add(`${_}ing --> ${m} : ${_} ðŸŸ¢`),w.forEach(T=>{T!==m&&d.add(`${T} --> ${_}ing : ${_}`)})});const S=[...d];return Object.defineProperties(a,{stateDiagram:{value:S},allStates:{value:w}}),S}static get(a){let o;return typeof a=="string"?(o=O.instances.get(a),o||O.instances.set(a,o=new O(a,void 0,Object.create(O.prototype)))):(o=O.instances2.get(a),o||O.instances2.set(a,o=new O(a.constructor.name,void 0,Object.create(O.prototype)))),o}static getState(a){var o;return(o=O.get(a))===null||o===void 0?void 0:o.state}updateDevTools(a={}){Ti(O.UPDATEAFSM,Object.assign({name:this.name,group:this.groupName},a))}get state(){return this._state}set state(a){Re.call(this,a)}}O.STATECHANGED="stateChanged";O.UPDATEAFSM="updateAFSM";O.INIT="[*]";O.ON="on";O.OFF="off";O.instances=new Map;O.instances2=new WeakMap;var le=(h=>(h.CONNECTED="connected",h.DISCONNECTED="disconnected",h.RECONNECTED="reconnected",h))(le||{}),Di=globalThis&&globalThis.__awaiter||function(h,a,o,d){function v(g){return g instanceof o?g:new o(function(w){w(g)})}return new(o||(o=Promise))(function(g,w){function A(_){try{m(d.next(_))}catch(T){w(T)}}function S(_){try{m(d.throw(_))}catch(T){w(T)}}function m(_){_.done?g(_.value):v(_.value).then(A,S)}m((d=d.apply(h,a||[])).next())})};const $r=Symbol(32),Rr=Symbol(16),Nr=Symbol(8);class Ue{constructor(a){this.g=a,this.consumed=0,a&&(this.need=a.next().value)}setG(a){this.g=a,this.demand(a.next().value,!0)}consume(){this.buffer&&this.consumed&&(this.buffer.copyWithin(0,this.consumed),this.buffer=this.buffer.subarray(0,this.buffer.length-this.consumed),this.consumed=0)}demand(a,o){return o&&this.consume(),this.need=a,this.flush()}read(a){return Di(this,void 0,void 0,function*(){return this.lastReadPromise&&(yield this.lastReadPromise),this.lastReadPromise=new Promise((o,d)=>{var v;this.reject=d,this.resolve=w=>{delete this.lastReadPromise,delete this.resolve,delete this.need,o(w)},this.demand(a,!0)||(v=this.pull)===null||v===void 0||v.call(this,a)})})}readU32(){return this.read($r)}readU16(){return this.read(Rr)}readU8(){return this.read(Nr)}close(){var a;this.g&&this.g.return(),this.buffer&&this.buffer.subarray(0,0),(a=this.reject)===null||a===void 0||a.call(this,new Error("EOF")),delete this.lastReadPromise}flush(){if(!this.buffer||!this.need)return;let a=null;const o=this.buffer.subarray(this.consumed);let d=0;const v=g=>o.length<(d=g);if(typeof this.need=="number"){if(v(this.need))return;a=o.subarray(0,d)}else if(this.need===$r){if(v(4))return;a=o[0]<<24|o[1]<<16|o[2]<<8|o[3]}else if(this.need===Rr){if(v(2))return;a=o[0]<<8|o[1]}else if(this.need===Nr){if(v(1))return;a=o[0]}else if("buffer"in this.need){if("byteOffset"in this.need){if(v(this.need.byteLength-this.need.byteOffset))return;new Uint8Array(this.need.buffer,this.need.byteOffset).set(o.subarray(0,d)),a=this.need}else if(this.g){this.g.throw(new Error("Unsupported type"));return}}else{if(v(this.need.byteLength))return;new Uint8Array(this.need).set(o.subarray(0,d)),a=this.need}return this.consumed+=d,this.g?this.demand(this.g.next(a).value,!0):this.resolve&&this.resolve(a),a}write(a){if(a instanceof Uint8Array?this.malloc(a.length).set(a):"buffer"in a?this.malloc(a.byteLength).set(new Uint8Array(a.buffer,a.byteOffset,a.byteLength)):this.malloc(a.byteLength).set(new Uint8Array(a)),this.g||this.resolve)this.flush();else return new Promise(o=>this.pull=o)}writeU32(a){this.malloc(4).set([a>>24&255,a>>16&255,a>>8&255,a&255]),this.flush()}writeU16(a){this.malloc(2).set([a>>8&255,a&255]),this.flush()}writeU8(a){this.malloc(1)[0]=a,this.flush()}malloc(a){if(this.buffer){const o=this.buffer.length,d=o+a;if(d<=this.buffer.buffer.byteLength-this.buffer.byteOffset)this.buffer=new Uint8Array(this.buffer.buffer,this.buffer.byteOffset,d);else{const v=new Uint8Array(d);v.set(this.buffer),this.buffer=v}return this.buffer.subarray(o,d)}else return this.buffer=new Uint8Array(a),this.buffer}}Ue.U32=$r;Ue.U16=Rr;Ue.U8=Nr;var Ci=Object.defineProperty,Si=Object.getOwnPropertyDescriptor,je=(h,a,o,d)=>{for(var v=d>1?void 0:d?Si(a,o):a,g=h.length-1,w;g>=0;g--)(w=h[g])&&(v=(d?w(a,o,v):w(v))||v);return d&&v&&Ci(a,o,v),v};function wt(h,a=1,o=1){return h<=1?o:wt(h-1,o,a+o)}function Ai(h){const a=Math.round(h/2)+1;return a>6?13*1e3:wt(a)*1e3}class yt{constructor(){this.total=0,this._buffer=0,this.lastTime=0,this._bps=0}add(a){const o=Date.now();this._buffer+=a,this.lastTime===0?this.lastTime=o:o-this.lastTime>1e3&&(this._bps=this._buffer*1e3/(o-this.lastTime)>>0,this._buffer=0,this.lastTime=o),this.total+=a}get bps(){return Date.now()-this.lastTime>5e3?0:this._bps}}class ye extends O{constructor(a,o={}){super(a||"conn","Connection"),this.url=a,this.options=o,this.up=new yt,this.down=new yt,this.underlyingSink={write:async d=>{var v;return this.down.add(d.length||d.byteLength),(v=this.oput)==null?void 0:v.write(d)}},this.options.reconnectTimeout||(this.options.reconnectTimeout=Ai)}read(a){return Promise.reject("not connected")}async connect(){this.abortCtrl=new AbortController,`${this.url}`,console.time(this.url),this.onConnected(await this._connect())}_close(){}_send(a){}async reconnect(){`${this.url}`,console.time(this.url),this.abortCtrl=new AbortController,this.onConnected(await this._connect())}onConnected(a){if(console.timeEnd(this.url),!!a)return this.oput||(this.oput=new Ue),this.read=this.oput.read.bind(this.oput),a.pipeTo(new WritableStream(this.underlyingSink),this.abortCtrl).catch(o=>{this.abortCtrl.signal.aborted||this.disconnect(o)})}disconnect(a){console.warn(`disconnect: ${this.url}`,a),this.options.reconnectCount&&this.reconnectAfter()}reconnectAfter(a=1e3,o=0){setTimeout(()=>{this.reconnect().catch(d=>{`${this.url}`,o<this.options.reconnectCount&&this.reconnectAfter(this.options.reconnectTimeout(o),o+1)})},a)}close(){var a;(a=this.abortCtrl)==null||a.abort(),this._close()}send(a){this.up.add(a.byteLength-("byteOffset"in a?a.byteOffset:0)),this._send(a)}}je([Me(le.CONNECTED)],ye.prototype,"read",1);je([H([le.DISCONNECTED,O.INIT],le.CONNECTED)],ye.prototype,"connect",1);je([H(le.DISCONNECTED,le.RECONNECTED)],ye.prototype,"reconnect",1);je([H(le.CONNECTED,le.DISCONNECTED)],ye.prototype,"disconnect",1);je([H([],O.INIT)],ye.prototype,"close",1);class Ki extends ye{constructor(a){super(a.label),this.dc=a}async _connect(){return new ReadableStream({start:a=>{this.dc.onclose=()=>{a.close()},this.dc.onerror=o=>{a.error(o)},this.dc.onmessage=o=>{a.enqueue(o.data)}}})}_close(){this.dc.close()}_send(a){this.dc.send(a)}}class Yi extends Ne.EventEmitter{constructor(a,o="recvonly"){super(),this.id=a,this.direction=o}get mediaStream(){return this._mediaStream}set mediaStream(a){this._mediaStream=a,a&&this.emit("change",a)}set audioTrack(a){if(this._audioTrack=a,this._mediaStream){const o=this._mediaStream.getAudioTracks()[0];o&&this._mediaStream.removeTrack(o)}a&&(this._mediaStream?this._mediaStream.addTrack(a):this._mediaStream=new MediaStream([a])),this._mediaStream&&this.emit("change",this._mediaStream)}get audioTrack(){var a;return this._audioTrack||((a=this._mediaStream)==null?void 0:a.getAudioTracks()[0])}set videoTrack(a){if(this._videoTrack=a,this._mediaStream){const o=this._mediaStream.getVideoTracks()[0];o&&this._mediaStream.removeTrack(o)}a&&(this._mediaStream?this._mediaStream.addTrack(a):this._mediaStream=new MediaStream([a])),this._mediaStream&&this.emit("change",this._mediaStream)}get videoTrack(){var a;return this._videoTrack||((a=this._mediaStream)==null?void 0:a.getVideoTracks()[0])}close(){this.emit("close")}}class Qi extends ye{constructor(){super(...arguments),this.webrtc=new RTCPeerConnection(this.options.rtcConfig),this.streams=new Map,this.videoTransceiver=new Array,this.audioTransceiver=new Array}async _connect(){const a=await this.webrtc.createOffer();await this.webrtc.setLocalDescription(a);const d=await(await fetch(this.url,{method:"POST",body:a.sdp,...this.options.requestInit||{}})).text();return await this.webrtc.setRemoteDescription({type:"answer",sdp:d}),this.webrtc.ontrack=({track:v,streams:g,transceiver:w})=>{if(g.length){const A=this.streams.get(g[0].id);A&&A.direction==="recvonly"&&(A.mediaStream=g[0])}},new Promise((v,g)=>{this.webrtc.onconnectionstatechange=w=>{switch(this.webrtc.connectionState){case"disconnected":this.disconnect(w);break;case"connected":v();break;case"failed":g(w)}}})}addStream(a){return this.audioTransceiver.length?(a.audioTransceiver=this.audioTransceiver.pop(),a.audioTransceiver.direction=a.direction):a.audioTransceiver=this.webrtc.addTransceiver(a.audioTrack||"audio",{direction:a.direction}),this.videoTransceiver.length?(a.videoTransceiver=this.videoTransceiver.pop(),a.videoTransceiver.direction=a.direction):a.videoTransceiver=this.webrtc.addTransceiver(a.videoTrack||"video",{direction:a.direction}),this.streams.set(a.id,a),a}deleteStream(a){const o=this.streams.get(a);o&&(delete o.mediaStream,o.audioTransceiver.direction="inactive",o.videoTransceiver.direction="inactive",this.audioTransceiver.push(o.audioTransceiver),this.videoTransceiver.push(o.videoTransceiver),this.streams.delete(a))}_close(){var a;(a=this.webrtc)==null||a.close()}}var ki=Object.defineProperty,Fi=Object.getOwnPropertyDescriptor,Le=(h,a,o,d)=>{for(var v=d>1?void 0:d?Fi(a,o):a,g=h.length-1,w;g>=0;g--)(w=h[g])&&(v=(d?w(a,o,v):w(v))||v);return d&&v&&ki(a,o,v),v};class xe extends O{constructor(a){super(),this.module={},this.width=0,this.height=0,this.createModule=a}initialize(){return new Promise(a=>{const o=this.module;o.print=d=>console.log(d),o.printErr=d=>console.log(`[JS] ERROR: ${d}`),o.onAbort=()=>console.log("[JS] FATAL: WASM ABORTED"),o.postRun=d=>{this.decoder=new this.module.VideoDecoder(this),a()},this.createModule(o)})}configure(a){this.config=a,this.decoder.setCodec(this.config.codec,this.config.description?"avcc":"annexb",this.config.description??"")}decode(a){this.decoder.decode(a.data,a.type=="key",a.timestamp)}flush(){}reset(){this.config=void 0,this.decoder&&this.decoder.clear()}close(){this.removeAllListeners(),this.decoder&&(this.decoder.clear(),this.decoder.delete())}videoInfo(a,o){this.width=a,this.height=o;let d={width:a,height:o};this.emit(Pe.VideoCodecInfo,d)}yuvData(a,o){if(!this.module)return;const d=this.width*this.height,v=d>>2;let g=this.module.HEAPU32[a>>2],w=this.module.HEAPU32[(a>>2)+1],A=this.module.HEAPU32[(a>>2)+2],S=this.module.HEAPU8.subarray(g,g+d),m=this.module.HEAPU8.subarray(w,w+v),_=this.module.HEAPU8.subarray(A,A+v);const T=new Uint8Array(d+v+v);T.set(S),T.set(m,d),T.set(_,d+v),this.emit(Pe.VideoFrame,new VideoFrame(T,{codedWidth:this.width,codedHeight:this.height,format:"I420",timestamp:o}))}errorInfo(a){let o={errMsg:a};this.emit(Pe.Error,o)}}Le([H([O.INIT,"closed"],"initialized")],xe.prototype,"initialize",1);Le([H("initialized","configured")],xe.prototype,"configure",1);Le([Me("configured")],xe.prototype,"decode",1);Le([H([],O.INIT)],xe.prototype,"reset",1);Le([H([],"closed")],xe.prototype,"close",1);var Oi=Object.defineProperty,$i=Object.getOwnPropertyDescriptor,ze=(h,a,o,d)=>{for(var v=d>1?void 0:d?$i(a,o):a,g=h.length-1,w;g>=0;g--)(w=h[g])&&(v=(d?w(a,o,v):w(v))||v);return d&&v&&Oi(a,o,v),v};class Be extends O{async initialize(){this.decoder=new VideoDecoder({output:a=>{this.emit(Pe.VideoFrame,a)},error:a=>{this.emit(Pe.Error,a),this.close()}})}configure(a){this.config=a,this.decoder.configure({...a,codec:a.codec=="hevc"?"hvc1.1.6.L0.12.34.56.78.9A.BC":"avc1.420028"})}decode(a){this.decoder.state==="configured"&&this.decoder.decode(new EncodedVideoChunk(a))}flush(){this.decoder.flush()}reset(){this.decoder.reset()}close(){this.decoder.close()}}ze([H([O.INIT,"closed"],"initialized")],Be.prototype,"initialize",1);ze([H("initialized","configured")],Be.prototype,"configure",1);ze([Me("configured")],Be.prototype,"decode",1);ze([H([],O.INIT)],Be.prototype,"reset",1);ze([H([],"closed",{ignoreError:!0})],Be.prototype,"close",1);var Ri=(()=>{var h=import.meta.url;return function(o){o=o||{};var o=typeof o<"u"?o:{},d,v;o.ready=new Promise(function(e,r){d=e,v=r});var g=Object.assign({},o),w="./this.program",A=typeof window=="object",S=typeof importScripts=="function",m=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_="";function T(e){return o.locateFile?o.locateFile(e,_):_+e}var j,L,I,$,D,ee;m?(S?_=require("path").dirname(_)+"/":_=__dirname+"/",ee=()=>{D||($=require("fs"),D=require("path"))},j=function(r,t){return ee(),r=D.normalize(r),$.readFileSync(r,t?void 0:"utf8")},I=e=>{var r=j(e,!0);return r.buffer||(r=new Uint8Array(r)),r},L=(e,r,t)=>{ee(),e=D.normalize(e),$.readFile(e,function(n,s){n?t(n):r(s.buffer)})},process.argv.length>1&&(w=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof wi))throw e}),process.on("unhandledRejection",function(e){throw e}),o.inspect=function(){return"[Emscripten Module object]"}):(A||S)&&(S?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),h&&(_=h),_.indexOf("blob:")!==0?_=_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1):_="",j=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},S&&(I=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),L=(e,r,t)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(n.status==200||n.status==0&&n.response){r(n.response);return}t()},n.onerror=t,n.send(null)});var re=o.print||console.log.bind(console),M=o.printErr||console.warn.bind(console);Object.assign(o,g),g=null,o.arguments&&o.arguments,o.thisProgram&&(w=o.thisProgram),o.quit&&o.quit;var fr=4,te;o.wasmBinary&&(te=o.wasmBinary),o.noExitRuntime,typeof WebAssembly!="object"&&pe("no native wasm support detected");var Ir,Mr=!1;function Ur(e,r){e||pe(r)}var jr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function we(e,r,t){for(var n=r+t,s=r;e[s]&&!(s>=n);)++s;if(s-r>16&&e.buffer&&jr)return jr.decode(e.subarray(r,s));for(var u="";r<s;){var f=e[r++];if(!(f&128)){u+=String.fromCharCode(f);continue}var c=e[r++]&63;if((f&224)==192){u+=String.fromCharCode((f&31)<<6|c);continue}var l=e[r++]&63;if((f&240)==224?f=(f&15)<<12|c<<6|l:f=(f&7)<<18|c<<12|l<<6|e[r++]&63,f<65536)u+=String.fromCharCode(f);else{var p=f-65536;u+=String.fromCharCode(55296|p>>10,56320|p&1023)}}return u}function Lr(e,r){return e?we(G,e,r):""}function lr(e,r,t,n){if(!(n>0))return 0;for(var s=t,u=t+n-1,f=0;f<e.length;++f){var c=e.charCodeAt(f);if(c>=55296&&c<=57343){var l=e.charCodeAt(++f);c=65536+((c&1023)<<10)|l&1023}if(c<=127){if(t>=u)break;r[t++]=c}else if(c<=2047){if(t+1>=u)break;r[t++]=192|c>>6,r[t++]=128|c&63}else if(c<=65535){if(t+2>=u)break;r[t++]=224|c>>12,r[t++]=128|c>>6&63,r[t++]=128|c&63}else{if(t+3>=u)break;r[t++]=240|c>>18,r[t++]=128|c>>12&63,r[t++]=128|c>>6&63,r[t++]=128|c&63}}return r[t]=0,t-s}function bt(e,r,t){return lr(e,G,r,t)}function dr(e){for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++t)&1023),n<=127?++r:n<=2047?r+=2:n<=65535?r+=3:r+=4}return r}var xr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Pt(e,r){for(var t=e,n=t>>1,s=n+r/2;!(n>=s)&&Ge[n];)++n;if(t=n<<1,t-e>32&&xr)return xr.decode(G.subarray(e,t));for(var u="",f=0;!(f>=r/2);++f){var c=de[e+f*2>>1];if(c==0)break;u+=String.fromCharCode(c)}return u}function Tt(e,r,t){if(t===void 0&&(t=2147483647),t<2)return 0;t-=2;for(var n=r,s=t<e.length*2?t/2:e.length,u=0;u<s;++u){var f=e.charCodeAt(u);de[r>>1]=f,r+=2}return de[r>>1]=0,r-n}function Dt(e){return e.length*2}function Ct(e,r){for(var t=0,n="";!(t>=r/4);){var s=F[e+t*4>>2];if(s==0)break;if(++t,s>=65536){var u=s-65536;n+=String.fromCharCode(55296|u>>10,56320|u&1023)}else n+=String.fromCharCode(s)}return n}function St(e,r,t){if(t===void 0&&(t=2147483647),t<4)return 0;for(var n=r,s=n+t-4,u=0;u<e.length;++u){var f=e.charCodeAt(u);if(f>=55296&&f<=57343){var c=e.charCodeAt(++u);f=65536+((f&1023)<<10)|c&1023}if(F[r>>2]=f,r+=4,r+4>s)break}return F[r>>2]=0,r-n}function At(e){for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n>=55296&&n<=57343&&++t,r+=4}return r}function kt(e,r,t){for(var n=0;n<e.length;++n)Y[r++>>0]=e.charCodeAt(n);t||(Y[r>>0]=0)}var hr,Y,G,de,Ge,F,x,zr,Br;function Ft(e){hr=e,o.HEAP8=Y=new Int8Array(e),o.HEAP16=de=new Int16Array(e),o.HEAP32=F=new Int32Array(e),o.HEAPU8=G=new Uint8Array(e),o.HEAPU16=Ge=new Uint16Array(e),o.HEAPU32=x=new Uint32Array(e),o.HEAPF32=zr=new Float32Array(e),o.HEAPF64=Br=new Float64Array(e)}o.INITIAL_MEMORY;var Hr,Wr=[],Vr=[],qr=[];function Ot(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Nt(o.preRun.shift());vr(Wr)}function $t(){!o.noFSInit&&!i.init.initialized&&i.init(),i.ignorePermissions=!1,vr(Vr)}function Rt(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)Mt(o.postRun.shift());vr(qr)}function Nt(e){Wr.unshift(e)}function It(e){Vr.unshift(e)}function Mt(e){qr.unshift(e)}var he=0,De=null;function zi(e){return e}function pr(e){he++,o.monitorRunDependencies&&o.monitorRunDependencies(he)}function Xe(e){if(he--,o.monitorRunDependencies&&o.monitorRunDependencies(he),he==0&&De){var r=De;De=null,r()}}function pe(e){o.onAbort&&o.onAbort(e),e="Aborted("+e+")",M(e),Mr=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw v(r),r}var Ut="data:application/octet-stream;base64,";function Gr(e){return e.startsWith(Ut)}function Xr(e){return e.startsWith("file://")}var J;o.locateFile?(J="audiodec.wasm",Gr(J)||(J=T(J))):J=new URL("/ui/assets/audiodec-28b192dd.wasm",self.location).toString();function Jr(e){try{if(e==J&&te)return new Uint8Array(te);if(I)return I(e);throw"both async and sync fetching of the wasm failed"}catch(r){pe(r)}}function jt(){if(!te&&(A||S)){if(typeof fetch=="function"&&!Xr(J))return fetch(J,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+J+"'";return e.arrayBuffer()}).catch(function(){return Jr(J)});if(L)return new Promise(function(e,r){L(J,function(t){e(new Uint8Array(t))},r)})}return Promise.resolve().then(function(){return Jr(J)})}function Lt(){var e={a:yi};function r(f,c){var l=f.exports;o.asm=l,Ir=o.asm.G,Ft(Ir.buffer),Hr=o.asm.J,It(o.asm.H),Xe()}pr();function t(f){r(f.instance)}function n(f){return jt().then(function(c){return WebAssembly.instantiate(c,e)}).then(function(c){return c}).then(f,function(c){M("failed to asynchronously prepare wasm: "+c),pe(c)})}function s(){return!te&&typeof WebAssembly.instantiateStreaming=="function"&&!Gr(J)&&!Xr(J)&&!m&&typeof fetch=="function"?fetch(J,{credentials:"same-origin"}).then(function(f){var c=WebAssembly.instantiateStreaming(f,e);return c.then(t,function(l){return M("wasm streaming compile failed: "+l),M("falling back to ArrayBuffer instantiation"),n(t)})}):n(t)}if(o.instantiateWasm)try{var u=o.instantiateWasm(e,r);return u}catch(f){return M("Module.instantiateWasm callback failed with error: "+f),!1}return s().catch(v),{}}var W,ie;function vr(e){for(;e.length>0;){var r=e.shift();if(typeof r=="function"){r(o);continue}var t=r.func;typeof t=="number"?r.arg===void 0?Ke(t)():Ke(t)(r.arg):t(r.arg===void 0?null:r.arg)}}var Je=[];function Ke(e){var r=Je[e];return r||(e>=Je.length&&(Je.length=e+1),Je[e]=r=Hr.get(e)),r}function xt(e){return or(e+24)+24}function zt(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(r){x[this.ptr+4>>2]=r},this.get_type=function(){return x[this.ptr+4>>2]},this.set_destructor=function(r){x[this.ptr+8>>2]=r},this.get_destructor=function(){return x[this.ptr+8>>2]},this.set_refcount=function(r){F[this.ptr>>2]=r},this.set_caught=function(r){r=r?1:0,Y[this.ptr+12>>0]=r},this.get_caught=function(){return Y[this.ptr+12>>0]!=0},this.set_rethrown=function(r){r=r?1:0,Y[this.ptr+13>>0]=r},this.get_rethrown=function(){return Y[this.ptr+13>>0]!=0},this.init=function(r,t){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var r=F[this.ptr>>2];F[this.ptr>>2]=r+1},this.release_ref=function(){var r=F[this.ptr>>2];return F[this.ptr>>2]=r-1,r===1},this.set_adjusted_ptr=function(r){x[this.ptr+16>>2]=r},this.get_adjusted_ptr=function(){return x[this.ptr+16>>2]},this.get_exception_ptr=function(){var r=vt(this.get_type());if(r)return x[this.excPtr>>2];var t=this.get_adjusted_ptr();return t!==0?t:this.excPtr}}function Bt(e,r,t){var n=new zt(e);throw n.init(r,t),e}function Ht(e){return F[dt()>>2]=e,e}var R={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return r.exec(e).slice(1)},normalizeArray:(e,r)=>{for(var t=0,n=e.length-1;n>=0;n--){var s=e[n];s==="."?e.splice(n,1):s===".."?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:e=>{var r=R.isAbs(e),t=e.substr(-1)==="/";return e=R.normalizeArray(e.split("/").filter(n=>!!n),!r).join("/"),!e&&!r&&(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:e=>{var r=R.splitPath(e),t=r[0],n=r[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)},basename:e=>{if(e==="/")return"/";e=R.normalize(e),e=e.replace(/\/$/,"");var r=e.lastIndexOf("/");return r===-1?e:e.substr(r+1)},join:function(){var e=Array.prototype.slice.call(arguments,0);return R.normalize(e.join("/"))},join2:(e,r)=>R.normalize(e+"/"+r)};function Wt(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}else if(m)try{var r=require("crypto");return function(){return r.randomBytes(1)[0]}}catch{}return function(){pe("randomDevice")}}var oe={resolve:function(){for(var e="",r=!1,t=arguments.length-1;t>=-1&&!r;t--){var n=t>=0?arguments[t]:i.cwd();if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,r=R.isAbs(n)}return e=R.normalizeArray(e.split("/").filter(s=>!!s),!r).join("/"),(r?"/":"")+e||"."},relative:(e,r)=>{e=oe.resolve(e).substr(1),r=oe.resolve(r).substr(1);function t(p){for(var E=0;E<p.length&&p[E]==="";E++);for(var b=p.length-1;b>=0&&p[b]==="";b--);return E>b?[]:p.slice(E,b-E+1)}for(var n=t(e.split("/")),s=t(r.split("/")),u=Math.min(n.length,s.length),f=u,c=0;c<u;c++)if(n[c]!==s[c]){f=c;break}for(var l=[],c=f;c<n.length;c++)l.push("..");return l=l.concat(s.slice(f)),l.join("/")}},ve={ttys:[],init:function(){},shutdown:function(){},register:function(e,r){ve.ttys[e]={input:[],output:[],ops:r},i.registerDevice(e,ve.stream_ops)},stream_ops:{open:function(e){var r=ve.ttys[e.node.rdev];if(!r)throw new i.ErrnoError(43);e.tty=r,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,r,t,n,s){if(!e.tty||!e.tty.ops.get_char)throw new i.ErrnoError(60);for(var u=0,f=0;f<n;f++){var c;try{c=e.tty.ops.get_char(e.tty)}catch{throw new i.ErrnoError(29)}if(c===void 0&&u===0)throw new i.ErrnoError(6);if(c==null)break;u++,r[t+f]=c}return u&&(e.node.timestamp=Date.now()),u},write:function(e,r,t,n,s){if(!e.tty||!e.tty.ops.put_char)throw new i.ErrnoError(60);try{for(var u=0;u<n;u++)e.tty.ops.put_char(e.tty,r[t+u])}catch{throw new i.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),u}},default_tty_ops:{get_char:function(e){if(!e.input.length){var r=null;if(m){var t=256,n=Buffer.alloc(t),s=0;try{s=$.readSync(process.stdin.fd,n,0,t,-1)}catch(u){if(u.toString().includes("EOF"))s=0;else throw u}s>0?r=n.slice(0,s).toString("utf-8"):r=null}else typeof window<"u"&&typeof window.prompt=="function"?(r=window.prompt("Input: "),r!==null&&(r+=`
`)):typeof readline=="function"&&(r=readline(),r!==null&&(r+=`
`));if(!r)return null;e.input=Ar(r,!0)}return e.input.shift()},put_char:function(e,r){r===null||r===10?(re(we(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},flush:function(e){e.output&&e.output.length>0&&(re(we(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,r){r===null||r===10?(M(we(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},flush:function(e){e.output&&e.output.length>0&&(M(we(e.output,0)),e.output=[])}}};function Vt(e,r){G.fill(0,e,e+r)}function qt(e,r){return Math.ceil(e/r)*r}function Kr(e){e=qt(e,65536);var r=pt(65536,e);return r?(Vt(r,e),r):0}var k={ops_table:null,mount:function(e){return k.createNode(null,"/",16895,0)},createNode:function(e,r,t,n){if(i.isBlkdev(t)||i.isFIFO(t))throw new i.ErrnoError(63);k.ops_table||(k.ops_table={dir:{node:{getattr:k.node_ops.getattr,setattr:k.node_ops.setattr,lookup:k.node_ops.lookup,mknod:k.node_ops.mknod,rename:k.node_ops.rename,unlink:k.node_ops.unlink,rmdir:k.node_ops.rmdir,readdir:k.node_ops.readdir,symlink:k.node_ops.symlink},stream:{llseek:k.stream_ops.llseek}},file:{node:{getattr:k.node_ops.getattr,setattr:k.node_ops.setattr},stream:{llseek:k.stream_ops.llseek,read:k.stream_ops.read,write:k.stream_ops.write,allocate:k.stream_ops.allocate,mmap:k.stream_ops.mmap,msync:k.stream_ops.msync}},link:{node:{getattr:k.node_ops.getattr,setattr:k.node_ops.setattr,readlink:k.node_ops.readlink},stream:{}},chrdev:{node:{getattr:k.node_ops.getattr,setattr:k.node_ops.setattr},stream:i.chrdev_stream_ops}});var s=i.createNode(e,r,t,n);return i.isDir(s.mode)?(s.node_ops=k.ops_table.dir.node,s.stream_ops=k.ops_table.dir.stream,s.contents={}):i.isFile(s.mode)?(s.node_ops=k.ops_table.file.node,s.stream_ops=k.ops_table.file.stream,s.usedBytes=0,s.contents=null):i.isLink(s.mode)?(s.node_ops=k.ops_table.link.node,s.stream_ops=k.ops_table.link.stream):i.isChrdev(s.mode)&&(s.node_ops=k.ops_table.chrdev.node,s.stream_ops=k.ops_table.chrdev.stream),s.timestamp=Date.now(),e&&(e.contents[r]=s,e.timestamp=s.timestamp),s},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,r){var t=e.contents?e.contents.length:0;if(!(t>=r)){var n=1024*1024;r=Math.max(r,t*(t<n?2:1.125)>>>0),t!=0&&(r=Math.max(r,256));var s=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(s.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,r){if(e.usedBytes!=r)if(r==0)e.contents=null,e.usedBytes=0;else{var t=e.contents;e.contents=new Uint8Array(r),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r}},node_ops:{getattr:function(e){var r={};return r.dev=i.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,i.isDir(e.mode)?r.size=4096:i.isFile(e.mode)?r.size=e.usedBytes:i.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.timestamp),r.mtime=new Date(e.timestamp),r.ctime=new Date(e.timestamp),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr:function(e,r){r.mode!==void 0&&(e.mode=r.mode),r.timestamp!==void 0&&(e.timestamp=r.timestamp),r.size!==void 0&&k.resizeFileStorage(e,r.size)},lookup:function(e,r){throw i.genericErrors[44]},mknod:function(e,r,t,n){return k.createNode(e,r,t,n)},rename:function(e,r,t){if(i.isDir(e.mode)){var n;try{n=i.lookupNode(r,t)}catch{}if(n)for(var s in n.contents)throw new i.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=t,r.contents[t]=e,r.timestamp=e.parent.timestamp,e.parent=r},unlink:function(e,r){delete e.contents[r],e.timestamp=Date.now()},rmdir:function(e,r){var t=i.lookupNode(e,r);for(var n in t.contents)throw new i.ErrnoError(55);delete e.contents[r],e.timestamp=Date.now()},readdir:function(e){var r=[".",".."];for(var t in e.contents)e.contents.hasOwnProperty(t)&&r.push(t);return r},symlink:function(e,r,t){var n=k.createNode(e,r,41471,0);return n.link=t,n},readlink:function(e){if(!i.isLink(e.mode))throw new i.ErrnoError(28);return e.link}},stream_ops:{read:function(e,r,t,n,s){var u=e.node.contents;if(s>=e.node.usedBytes)return 0;var f=Math.min(e.node.usedBytes-s,n);if(f>8&&u.subarray)r.set(u.subarray(s,s+f),t);else for(var c=0;c<f;c++)r[t+c]=u[s+c];return f},write:function(e,r,t,n,s,u){if(!n)return 0;var f=e.node;if(f.timestamp=Date.now(),r.subarray&&(!f.contents||f.contents.subarray)){if(u)return f.contents=r.subarray(t,t+n),f.usedBytes=n,n;if(f.usedBytes===0&&s===0)return f.contents=r.slice(t,t+n),f.usedBytes=n,n;if(s+n<=f.usedBytes)return f.contents.set(r.subarray(t,t+n),s),n}if(k.expandFileStorage(f,s+n),f.contents.subarray&&r.subarray)f.contents.set(r.subarray(t,t+n),s);else for(var c=0;c<n;c++)f.contents[s+c]=r[t+c];return f.usedBytes=Math.max(f.usedBytes,s+n),n},llseek:function(e,r,t){var n=r;if(t===1?n+=e.position:t===2&&i.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new i.ErrnoError(28);return n},allocate:function(e,r,t){k.expandFileStorage(e.node,r+t),e.node.usedBytes=Math.max(e.node.usedBytes,r+t)},mmap:function(e,r,t,n,s){if(!i.isFile(e.node.mode))throw new i.ErrnoError(43);var u,f,c=e.node.contents;if(!(s&2)&&c.buffer===hr)f=!1,u=c.byteOffset;else{if((t>0||t+r<c.length)&&(c.subarray?c=c.subarray(t,t+r):c=Array.prototype.slice.call(c,t,t+r)),f=!0,u=Kr(r),!u)throw new i.ErrnoError(48);Y.set(c,u)}return{ptr:u,allocated:f}},msync:function(e,r,t,n,s){if(!i.isFile(e.node.mode))throw new i.ErrnoError(43);return s&2||k.stream_ops.write(e,r,0,n,t,!1),0}}};function Gt(e,r,t,n){var s=n?"":"al "+e;L(e,function(u){Ur(u,'Loading data file "'+e+'" failed (no arrayBuffer).'),r(new Uint8Array(u)),s&&Xe()},function(u){if(t)t();else throw'Loading data file "'+e+'" failed.'}),s&&pr()}var i={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,r={})=>{if(e=oe.resolve(i.cwd(),e),!e)return{path:"",node:null};var t={follow_mount:!0,recurse_count:0};if(r=Object.assign(t,r),r.recurse_count>8)throw new i.ErrnoError(32);for(var n=R.normalizeArray(e.split("/").filter(b=>!!b),!1),s=i.root,u="/",f=0;f<n.length;f++){var c=f===n.length-1;if(c&&r.parent)break;if(s=i.lookupNode(s,n[f]),u=R.join2(u,n[f]),i.isMountpoint(s)&&(!c||c&&r.follow_mount)&&(s=s.mounted.root),!c||r.follow)for(var l=0;i.isLink(s.mode);){var p=i.readlink(u);u=oe.resolve(R.dirname(u),p);var E=i.lookupPath(u,{recurse_count:r.recurse_count+1});if(s=E.node,l++>40)throw new i.ErrnoError(32)}}return{path:u,node:s}},getPath:e=>{for(var r;;){if(i.isRoot(e)){var t=e.mount.mountpoint;return r?t[t.length-1]!=="/"?t+"/"+r:t+r:t}r=r?e.name+"/"+r:e.name,e=e.parent}},hashName:(e,r)=>{for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n)|0;return(e+t>>>0)%i.nameTable.length},hashAddNode:e=>{var r=i.hashName(e.parent.id,e.name);e.name_next=i.nameTable[r],i.nameTable[r]=e},hashRemoveNode:e=>{var r=i.hashName(e.parent.id,e.name);if(i.nameTable[r]===e)i.nameTable[r]=e.name_next;else for(var t=i.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode:(e,r)=>{var t=i.mayLookup(e);if(t)throw new i.ErrnoError(t,e);for(var n=i.hashName(e.id,r),s=i.nameTable[n];s;s=s.name_next){var u=s.name;if(s.parent.id===e.id&&u===r)return s}return i.lookup(e,r)},createNode:(e,r,t,n)=>{var s=new i.FSNode(e,r,t,n);return i.hashAddNode(s),s},destroyNode:e=>{i.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(e&61440)===32768,isDir:e=>(e&61440)===16384,isLink:e=>(e&61440)===40960,isChrdev:e=>(e&61440)===8192,isBlkdev:e=>(e&61440)===24576,isFIFO:e=>(e&61440)===4096,isSocket:e=>(e&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var r=i.flagModes[e];if(typeof r>"u")throw new Error("Unknown file open mode: "+e);return r},flagsToPermissionString:e=>{var r=["r","w","rw"][e&3];return e&512&&(r+="w"),r},nodePermissions:(e,r)=>i.ignorePermissions?0:r.includes("r")&&!(e.mode&292)||r.includes("w")&&!(e.mode&146)||r.includes("x")&&!(e.mode&73)?2:0,mayLookup:e=>{var r=i.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate:(e,r)=>{try{var t=i.lookupNode(e,r);return 20}catch{}return i.nodePermissions(e,"wx")},mayDelete:(e,r,t)=>{var n;try{n=i.lookupNode(e,r)}catch(u){return u.errno}var s=i.nodePermissions(e,"wx");if(s)return s;if(t){if(!i.isDir(n.mode))return 54;if(i.isRoot(n)||i.getPath(n)===i.cwd())return 10}else if(i.isDir(n.mode))return 31;return 0},mayOpen:(e,r)=>e?i.isLink(e.mode)?32:i.isDir(e.mode)&&(i.flagsToPermissionString(r)!=="r"||r&512)?31:i.nodePermissions(e,i.flagsToPermissionString(r)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,r=i.MAX_OPEN_FDS)=>{for(var t=e;t<=r;t++)if(!i.streams[t])return t;throw new i.ErrnoError(33)},getStream:e=>i.streams[e],createStream:(e,r,t)=>{i.FSStream||(i.FSStream=function(){this.shared={}},i.FSStream.prototype={},Object.defineProperties(i.FSStream.prototype,{object:{get:function(){return this.node},set:function(s){this.node=s}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(s){this.shared.flags=s}},position:{get:function(){return this.shared.position},set:function(s){this.shared.position=s}}})),e=Object.assign(new i.FSStream,e);var n=i.nextfd(r,t);return e.fd=n,i.streams[n]=e,e},closeStream:e=>{i.streams[e]=null},chrdev_stream_ops:{open:e=>{var r=i.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new i.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,r)=>e<<8|r,registerDevice:(e,r)=>{i.devices[e]={stream_ops:r}},getDevice:e=>i.devices[e],getMounts:e=>{for(var r=[],t=[e];t.length;){var n=t.pop();r.push(n),t.push.apply(t,n.mounts)}return r},syncfs:(e,r)=>{typeof e=="function"&&(r=e,e=!1),i.syncFSRequests++,i.syncFSRequests>1&&M("warning: "+i.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var t=i.getMounts(i.root.mount),n=0;function s(f){return i.syncFSRequests--,r(f)}function u(f){if(f)return u.errored?void 0:(u.errored=!0,s(f));++n>=t.length&&s(null)}t.forEach(f=>{if(!f.type.syncfs)return u(null);f.type.syncfs(f,e,u)})},mount:(e,r,t)=>{var n=t==="/",s=!t,u;if(n&&i.root)throw new i.ErrnoError(10);if(!n&&!s){var f=i.lookupPath(t,{follow_mount:!1});if(t=f.path,u=f.node,i.isMountpoint(u))throw new i.ErrnoError(10);if(!i.isDir(u.mode))throw new i.ErrnoError(54)}var c={type:e,opts:r,mountpoint:t,mounts:[]},l=e.mount(c);return l.mount=c,c.root=l,n?i.root=l:u&&(u.mounted=c,u.mount&&u.mount.mounts.push(c)),l},unmount:e=>{var r=i.lookupPath(e,{follow_mount:!1});if(!i.isMountpoint(r.node))throw new i.ErrnoError(28);var t=r.node,n=t.mounted,s=i.getMounts(n);Object.keys(i.nameTable).forEach(f=>{for(var c=i.nameTable[f];c;){var l=c.name_next;s.includes(c.mount)&&i.destroyNode(c),c=l}}),t.mounted=null;var u=t.mount.mounts.indexOf(n);t.mount.mounts.splice(u,1)},lookup:(e,r)=>e.node_ops.lookup(e,r),mknod:(e,r,t)=>{var n=i.lookupPath(e,{parent:!0}),s=n.node,u=R.basename(e);if(!u||u==="."||u==="..")throw new i.ErrnoError(28);var f=i.mayCreate(s,u);if(f)throw new i.ErrnoError(f);if(!s.node_ops.mknod)throw new i.ErrnoError(63);return s.node_ops.mknod(s,u,r,t)},create:(e,r)=>(r=r!==void 0?r:438,r&=4095,r|=32768,i.mknod(e,r,0)),mkdir:(e,r)=>(r=r!==void 0?r:511,r&=1023,r|=16384,i.mknod(e,r,0)),mkdirTree:(e,r)=>{for(var t=e.split("/"),n="",s=0;s<t.length;++s)if(t[s]){n+="/"+t[s];try{i.mkdir(n,r)}catch(u){if(u.errno!=20)throw u}}},mkdev:(e,r,t)=>(typeof t>"u"&&(t=r,r=438),r|=8192,i.mknod(e,r,t)),symlink:(e,r)=>{if(!oe.resolve(e))throw new i.ErrnoError(44);var t=i.lookupPath(r,{parent:!0}),n=t.node;if(!n)throw new i.ErrnoError(44);var s=R.basename(r),u=i.mayCreate(n,s);if(u)throw new i.ErrnoError(u);if(!n.node_ops.symlink)throw new i.ErrnoError(63);return n.node_ops.symlink(n,s,e)},rename:(e,r)=>{var t=R.dirname(e),n=R.dirname(r),s=R.basename(e),u=R.basename(r),f,c,l;if(f=i.lookupPath(e,{parent:!0}),c=f.node,f=i.lookupPath(r,{parent:!0}),l=f.node,!c||!l)throw new i.ErrnoError(44);if(c.mount!==l.mount)throw new i.ErrnoError(75);var p=i.lookupNode(c,s),E=oe.relative(e,n);if(E.charAt(0)!==".")throw new i.ErrnoError(28);if(E=oe.relative(r,t),E.charAt(0)!==".")throw new i.ErrnoError(55);var b;try{b=i.lookupNode(l,u)}catch{}if(p!==b){var y=i.isDir(p.mode),P=i.mayDelete(c,s,y);if(P)throw new i.ErrnoError(P);if(P=b?i.mayDelete(l,u,y):i.mayCreate(l,u),P)throw new i.ErrnoError(P);if(!c.node_ops.rename)throw new i.ErrnoError(63);if(i.isMountpoint(p)||b&&i.isMountpoint(b))throw new i.ErrnoError(10);if(l!==c&&(P=i.nodePermissions(c,"w"),P))throw new i.ErrnoError(P);i.hashRemoveNode(p);try{c.node_ops.rename(p,l,u)}catch(C){throw C}finally{i.hashAddNode(p)}}},rmdir:e=>{var r=i.lookupPath(e,{parent:!0}),t=r.node,n=R.basename(e),s=i.lookupNode(t,n),u=i.mayDelete(t,n,!0);if(u)throw new i.ErrnoError(u);if(!t.node_ops.rmdir)throw new i.ErrnoError(63);if(i.isMountpoint(s))throw new i.ErrnoError(10);t.node_ops.rmdir(t,n),i.destroyNode(s)},readdir:e=>{var r=i.lookupPath(e,{follow:!0}),t=r.node;if(!t.node_ops.readdir)throw new i.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var r=i.lookupPath(e,{parent:!0}),t=r.node;if(!t)throw new i.ErrnoError(44);var n=R.basename(e),s=i.lookupNode(t,n),u=i.mayDelete(t,n,!1);if(u)throw new i.ErrnoError(u);if(!t.node_ops.unlink)throw new i.ErrnoError(63);if(i.isMountpoint(s))throw new i.ErrnoError(10);t.node_ops.unlink(t,n),i.destroyNode(s)},readlink:e=>{var r=i.lookupPath(e),t=r.node;if(!t)throw new i.ErrnoError(44);if(!t.node_ops.readlink)throw new i.ErrnoError(28);return oe.resolve(i.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,r)=>{var t=i.lookupPath(e,{follow:!r}),n=t.node;if(!n)throw new i.ErrnoError(44);if(!n.node_ops.getattr)throw new i.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>i.stat(e,!0),chmod:(e,r,t)=>{var n;if(typeof e=="string"){var s=i.lookupPath(e,{follow:!t});n=s.node}else n=e;if(!n.node_ops.setattr)throw new i.ErrnoError(63);n.node_ops.setattr(n,{mode:r&4095|n.mode&-4096,timestamp:Date.now()})},lchmod:(e,r)=>{i.chmod(e,r,!0)},fchmod:(e,r)=>{var t=i.getStream(e);if(!t)throw new i.ErrnoError(8);i.chmod(t.node,r)},chown:(e,r,t,n)=>{var s;if(typeof e=="string"){var u=i.lookupPath(e,{follow:!n});s=u.node}else s=e;if(!s.node_ops.setattr)throw new i.ErrnoError(63);s.node_ops.setattr(s,{timestamp:Date.now()})},lchown:(e,r,t)=>{i.chown(e,r,t,!0)},fchown:(e,r,t)=>{var n=i.getStream(e);if(!n)throw new i.ErrnoError(8);i.chown(n.node,r,t)},truncate:(e,r)=>{if(r<0)throw new i.ErrnoError(28);var t;if(typeof e=="string"){var n=i.lookupPath(e,{follow:!0});t=n.node}else t=e;if(!t.node_ops.setattr)throw new i.ErrnoError(63);if(i.isDir(t.mode))throw new i.ErrnoError(31);if(!i.isFile(t.mode))throw new i.ErrnoError(28);var s=i.nodePermissions(t,"w");if(s)throw new i.ErrnoError(s);t.node_ops.setattr(t,{size:r,timestamp:Date.now()})},ftruncate:(e,r)=>{var t=i.getStream(e);if(!t)throw new i.ErrnoError(8);if(!(t.flags&2097155))throw new i.ErrnoError(28);i.truncate(t.node,r)},utime:(e,r,t)=>{var n=i.lookupPath(e,{follow:!0}),s=n.node;s.node_ops.setattr(s,{timestamp:Math.max(r,t)})},open:(e,r,t)=>{if(e==="")throw new i.ErrnoError(44);r=typeof r=="string"?i.modeStringToFlags(r):r,t=typeof t>"u"?438:t,r&64?t=t&4095|32768:t=0;var n;if(typeof e=="object")n=e;else{e=R.normalize(e);try{var s=i.lookupPath(e,{follow:!(r&131072)});n=s.node}catch{}}var u=!1;if(r&64)if(n){if(r&128)throw new i.ErrnoError(20)}else n=i.mknod(e,t,0),u=!0;if(!n)throw new i.ErrnoError(44);if(i.isChrdev(n.mode)&&(r&=-513),r&65536&&!i.isDir(n.mode))throw new i.ErrnoError(54);if(!u){var f=i.mayOpen(n,r);if(f)throw new i.ErrnoError(f)}r&512&&!u&&i.truncate(n,0),r&=-131713;var c=i.createStream({node:n,path:i.getPath(n),flags:r,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return c.stream_ops.open&&c.stream_ops.open(c),o.logReadFiles&&!(r&1)&&(i.readFiles||(i.readFiles={}),e in i.readFiles||(i.readFiles[e]=1)),c},close:e=>{if(i.isClosed(e))throw new i.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(r){throw r}finally{i.closeStream(e.fd)}e.fd=null},isClosed:e=>e.fd===null,llseek:(e,r,t)=>{if(i.isClosed(e))throw new i.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new i.ErrnoError(70);if(t!=0&&t!=1&&t!=2)throw new i.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read:(e,r,t,n,s)=>{if(n<0||s<0)throw new i.ErrnoError(28);if(i.isClosed(e))throw new i.ErrnoError(8);if((e.flags&2097155)===1)throw new i.ErrnoError(8);if(i.isDir(e.node.mode))throw new i.ErrnoError(31);if(!e.stream_ops.read)throw new i.ErrnoError(28);var u=typeof s<"u";if(!u)s=e.position;else if(!e.seekable)throw new i.ErrnoError(70);var f=e.stream_ops.read(e,r,t,n,s);return u||(e.position+=f),f},write:(e,r,t,n,s,u)=>{if(n<0||s<0)throw new i.ErrnoError(28);if(i.isClosed(e))throw new i.ErrnoError(8);if(!(e.flags&2097155))throw new i.ErrnoError(8);if(i.isDir(e.node.mode))throw new i.ErrnoError(31);if(!e.stream_ops.write)throw new i.ErrnoError(28);e.seekable&&e.flags&1024&&i.llseek(e,0,2);var f=typeof s<"u";if(!f)s=e.position;else if(!e.seekable)throw new i.ErrnoError(70);var c=e.stream_ops.write(e,r,t,n,s,u);return f||(e.position+=c),c},allocate:(e,r,t)=>{if(i.isClosed(e))throw new i.ErrnoError(8);if(r<0||t<=0)throw new i.ErrnoError(28);if(!(e.flags&2097155))throw new i.ErrnoError(8);if(!i.isFile(e.node.mode)&&!i.isDir(e.node.mode))throw new i.ErrnoError(43);if(!e.stream_ops.allocate)throw new i.ErrnoError(138);e.stream_ops.allocate(e,r,t)},mmap:(e,r,t,n,s)=>{if(n&2&&!(s&2)&&(e.flags&2097155)!==2)throw new i.ErrnoError(2);if((e.flags&2097155)===1)throw new i.ErrnoError(2);if(!e.stream_ops.mmap)throw new i.ErrnoError(43);return e.stream_ops.mmap(e,r,t,n,s)},msync:(e,r,t,n,s)=>!e||!e.stream_ops.msync?0:e.stream_ops.msync(e,r,t,n,s),munmap:e=>0,ioctl:(e,r,t)=>{if(!e.stream_ops.ioctl)throw new i.ErrnoError(59);return e.stream_ops.ioctl(e,r,t)},readFile:(e,r={})=>{if(r.flags=r.flags||0,r.encoding=r.encoding||"binary",r.encoding!=="utf8"&&r.encoding!=="binary")throw new Error('Invalid encoding type "'+r.encoding+'"');var t,n=i.open(e,r.flags),s=i.stat(e),u=s.size,f=new Uint8Array(u);return i.read(n,f,0,u,0),r.encoding==="utf8"?t=we(f,0):r.encoding==="binary"&&(t=f),i.close(n),t},writeFile:(e,r,t={})=>{t.flags=t.flags||577;var n=i.open(e,t.flags,t.mode);if(typeof r=="string"){var s=new Uint8Array(dr(r)+1),u=lr(r,s,0,s.length);i.write(n,s,0,u,void 0,t.canOwn)}else if(ArrayBuffer.isView(r))i.write(n,r,0,r.byteLength,void 0,t.canOwn);else throw new Error("Unsupported data type");i.close(n)},cwd:()=>i.currentPath,chdir:e=>{var r=i.lookupPath(e,{follow:!0});if(r.node===null)throw new i.ErrnoError(44);if(!i.isDir(r.node.mode))throw new i.ErrnoError(54);var t=i.nodePermissions(r.node,"x");if(t)throw new i.ErrnoError(t);i.currentPath=r.path},createDefaultDirectories:()=>{i.mkdir("/tmp"),i.mkdir("/home"),i.mkdir("/home/web_user")},createDefaultDevices:()=>{i.mkdir("/dev"),i.registerDevice(i.makedev(1,3),{read:()=>0,write:(r,t,n,s,u)=>s}),i.mkdev("/dev/null",i.makedev(1,3)),ve.register(i.makedev(5,0),ve.default_tty_ops),ve.register(i.makedev(6,0),ve.default_tty1_ops),i.mkdev("/dev/tty",i.makedev(5,0)),i.mkdev("/dev/tty1",i.makedev(6,0));var e=Wt();i.createDevice("/dev","random",e),i.createDevice("/dev","urandom",e),i.mkdir("/dev/shm"),i.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{i.mkdir("/proc");var e=i.mkdir("/proc/self");i.mkdir("/proc/self/fd"),i.mount({mount:()=>{var r=i.createNode(e,"fd",16895,73);return r.node_ops={lookup:(t,n)=>{var s=+n,u=i.getStream(s);if(!u)throw new i.ErrnoError(8);var f={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>u.path}};return f.parent=f,f}},r}},{},"/proc/self/fd")},createStandardStreams:()=>{o.stdin?i.createDevice("/dev","stdin",o.stdin):i.symlink("/dev/tty","/dev/stdin"),o.stdout?i.createDevice("/dev","stdout",null,o.stdout):i.symlink("/dev/tty","/dev/stdout"),o.stderr?i.createDevice("/dev","stderr",null,o.stderr):i.symlink("/dev/tty1","/dev/stderr"),i.open("/dev/stdin",0),i.open("/dev/stdout",1),i.open("/dev/stderr",1)},ensureErrnoError:()=>{i.ErrnoError||(i.ErrnoError=function(r,t){this.node=t,this.setErrno=function(n){this.errno=n},this.setErrno(r),this.message="FS error"},i.ErrnoError.prototype=new Error,i.ErrnoError.prototype.constructor=i.ErrnoError,[44].forEach(e=>{i.genericErrors[e]=new i.ErrnoError(e),i.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:()=>{i.ensureErrnoError(),i.nameTable=new Array(4096),i.mount(k,{},"/"),i.createDefaultDirectories(),i.createDefaultDevices(),i.createSpecialDirectories(),i.filesystems={MEMFS:k}},init:(e,r,t)=>{i.init.initialized=!0,i.ensureErrnoError(),o.stdin=e||o.stdin,o.stdout=r||o.stdout,o.stderr=t||o.stderr,i.createStandardStreams()},quit:()=>{i.init.initialized=!1;for(var e=0;e<i.streams.length;e++){var r=i.streams[e];r&&i.close(r)}},getMode:(e,r)=>{var t=0;return e&&(t|=365),r&&(t|=146),t},findObject:(e,r)=>{var t=i.analyzePath(e,r);return t.exists?t.object:null},analyzePath:(e,r)=>{try{var t=i.lookupPath(e,{follow:!r});e=t.path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var t=i.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=t.path,n.parentObject=t.node,n.name=R.basename(e),t=i.lookupPath(e,{follow:!r}),n.exists=!0,n.path=t.path,n.object=t.node,n.name=t.node.name,n.isRoot=t.path==="/"}catch(s){n.error=s.errno}return n},createPath:(e,r,t,n)=>{e=typeof e=="string"?e:i.getPath(e);for(var s=r.split("/").reverse();s.length;){var u=s.pop();if(u){var f=R.join2(e,u);try{i.mkdir(f)}catch{}e=f}}return f},createFile:(e,r,t,n,s)=>{var u=R.join2(typeof e=="string"?e:i.getPath(e),r),f=i.getMode(n,s);return i.create(u,f)},createDataFile:(e,r,t,n,s,u)=>{var f=r;e&&(e=typeof e=="string"?e:i.getPath(e),f=r?R.join2(e,r):e);var c=i.getMode(n,s),l=i.create(f,c);if(t){if(typeof t=="string"){for(var p=new Array(t.length),E=0,b=t.length;E<b;++E)p[E]=t.charCodeAt(E);t=p}i.chmod(l,c|146);var y=i.open(l,577);i.write(y,t,0,t.length,0,u),i.close(y),i.chmod(l,c)}return l},createDevice:(e,r,t,n)=>{var s=R.join2(typeof e=="string"?e:i.getPath(e),r),u=i.getMode(!!t,!!n);i.createDevice.major||(i.createDevice.major=64);var f=i.makedev(i.createDevice.major++,0);return i.registerDevice(f,{open:c=>{c.seekable=!1},close:c=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(c,l,p,E,b)=>{for(var y=0,P=0;P<E;P++){var C;try{C=t()}catch{throw new i.ErrnoError(29)}if(C===void 0&&y===0)throw new i.ErrnoError(6);if(C==null)break;y++,l[p+P]=C}return y&&(c.node.timestamp=Date.now()),y},write:(c,l,p,E,b)=>{for(var y=0;y<E;y++)try{n(l[p+y])}catch{throw new i.ErrnoError(29)}return E&&(c.node.timestamp=Date.now()),y}}),i.mkdev(s,u,f)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(j)try{e.contents=Ar(j(e.url),!0),e.usedBytes=e.contents.length}catch{throw new i.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(e,r,t,n,s)=>{function u(){this.lengthKnown=!1,this.chunks=[]}if(u.prototype.get=function(P){if(!(P>this.length-1||P<0)){var C=P%this.chunkSize,U=P/this.chunkSize|0;return this.getter(U)[C]}},u.prototype.setDataGetter=function(P){this.getter=P},u.prototype.cacheLength=function(){var P=new XMLHttpRequest;if(P.open("HEAD",t,!1),P.send(null),!(P.status>=200&&P.status<300||P.status===304))throw new Error("Couldn't load "+t+". Status: "+P.status);var C=Number(P.getResponseHeader("Content-length")),U,z=(U=P.getResponseHeader("Accept-Ranges"))&&U==="bytes",V=(U=P.getResponseHeader("Content-Encoding"))&&U==="gzip",K=1024*1024;z||(K=C);var q=(Z,ce)=>{if(Z>ce)throw new Error("invalid range ("+Z+", "+ce+") or no bytes requested!");if(ce>C-1)throw new Error("only "+C+" bytes available! programmer error!");var B=new XMLHttpRequest;if(B.open("GET",t,!1),C!==K&&B.setRequestHeader("Range","bytes="+Z+"-"+ce),B.responseType="arraybuffer",B.overrideMimeType&&B.overrideMimeType("text/plain; charset=x-user-defined"),B.send(null),!(B.status>=200&&B.status<300||B.status===304))throw new Error("Couldn't load "+t+". Status: "+B.status);return B.response!==void 0?new Uint8Array(B.response||[]):Ar(B.responseText||"",!0)},ge=this;ge.setDataGetter(Z=>{var ce=Z*K,B=(Z+1)*K-1;if(B=Math.min(B,C-1),typeof ge.chunks[Z]>"u"&&(ge.chunks[Z]=q(ce,B)),typeof ge.chunks[Z]>"u")throw new Error("doXHR failed!");return ge.chunks[Z]}),(V||!C)&&(K=C=1,C=this.getter(0).length,K=C,re("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=C,this._chunkSize=K,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!S)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var f=new u;Object.defineProperties(f,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var c={isDevice:!1,contents:f}}else var c={isDevice:!1,url:t};var l=i.createFile(e,r,c,n,s);c.contents?l.contents=c.contents:c.url&&(l.contents=null,l.url=c.url),Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}});var p={},E=Object.keys(l.stream_ops);E.forEach(y=>{var P=l.stream_ops[y];p[y]=function(){return i.forceLoadFile(l),P.apply(null,arguments)}});function b(y,P,C,U,z){var V=y.node.contents;if(z>=V.length)return 0;var K=Math.min(V.length-z,U);if(V.slice)for(var q=0;q<K;q++)P[C+q]=V[z+q];else for(var q=0;q<K;q++)P[C+q]=V.get(z+q);return K}return p.read=(y,P,C,U,z)=>(i.forceLoadFile(l),b(y,P,C,U,z)),p.mmap=(y,P,C,U,z)=>{i.forceLoadFile(l);var V=Kr(P);if(!V)throw new i.ErrnoError(48);return b(y,Y,V,P,C),{ptr:V,allocated:!0}},l.stream_ops=p,l},createPreloadedFile:(e,r,t,n,s,u,f,c,l,p)=>{var E=r?oe.resolve(R.join2(e,r)):e;function b(y){function P(C){p&&p(),c||i.createDataFile(e,r,C,n,s,l),u&&u(),Xe()}Browser.handledByPreloadPlugin(y,E,P,()=>{f&&f(),Xe()})||P(y)}pr(),typeof t=="string"?Gt(t,y=>b(y),f):b(t)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,r,t)=>{r=r||(()=>{}),t=t||(()=>{});var n=i.indexedDB();try{var s=n.open(i.DB_NAME(),i.DB_VERSION)}catch(u){return t(u)}s.onupgradeneeded=()=>{re("creating db");var u=s.result;u.createObjectStore(i.DB_STORE_NAME)},s.onsuccess=()=>{var u=s.result,f=u.transaction([i.DB_STORE_NAME],"readwrite"),c=f.objectStore(i.DB_STORE_NAME),l=0,p=0,E=e.length;function b(){p==0?r():t()}e.forEach(y=>{var P=c.put(i.analyzePath(y).object.contents,y);P.onsuccess=()=>{l++,l+p==E&&b()},P.onerror=()=>{p++,l+p==E&&b()}}),f.onerror=t},s.onerror=t},loadFilesFromDB:(e,r,t)=>{r=r||(()=>{}),t=t||(()=>{});var n=i.indexedDB();try{var s=n.open(i.DB_NAME(),i.DB_VERSION)}catch(u){return t(u)}s.onupgradeneeded=t,s.onsuccess=()=>{var u=s.result;try{var f=u.transaction([i.DB_STORE_NAME],"readonly")}catch(y){t(y);return}var c=f.objectStore(i.DB_STORE_NAME),l=0,p=0,E=e.length;function b(){p==0?r():t()}e.forEach(y=>{var P=c.get(y);P.onsuccess=()=>{i.analyzePath(y).exists&&i.unlink(y),i.createDataFile(R.dirname(y),R.basename(y),P.result,!0,!0,!0),l++,l+p==E&&b()},P.onerror=()=>{p++,l+p==E&&b()}}),f.onerror=t},s.onerror=t}},X={DEFAULT_POLLMASK:5,calculateAt:function(e,r,t){if(R.isAbs(r))return r;var n;if(e===-100)n=i.cwd();else{var s=i.getStream(e);if(!s)throw new i.ErrnoError(8);n=s.path}if(r.length==0){if(!t)throw new i.ErrnoError(44);return n}return R.join2(n,r)},doStat:function(e,r,t){try{var n=e(r)}catch(s){if(s&&s.node&&R.normalize(r)!==R.normalize(i.getPath(s.node)))return-54;throw s}return F[t>>2]=n.dev,F[t+4>>2]=0,F[t+8>>2]=n.ino,F[t+12>>2]=n.mode,F[t+16>>2]=n.nlink,F[t+20>>2]=n.uid,F[t+24>>2]=n.gid,F[t+28>>2]=n.rdev,F[t+32>>2]=0,ie=[n.size>>>0,(W=n.size,+Math.abs(W)>=1?W>0?(Math.min(+Math.floor(W/4294967296),4294967295)|0)>>>0:~~+Math.ceil((W-+(~~W>>>0))/4294967296)>>>0:0)],F[t+40>>2]=ie[0],F[t+44>>2]=ie[1],F[t+48>>2]=4096,F[t+52>>2]=n.blocks,F[t+56>>2]=n.atime.getTime()/1e3|0,F[t+60>>2]=0,F[t+64>>2]=n.mtime.getTime()/1e3|0,F[t+68>>2]=0,F[t+72>>2]=n.ctime.getTime()/1e3|0,F[t+76>>2]=0,ie=[n.ino>>>0,(W=n.ino,+Math.abs(W)>=1?W>0?(Math.min(+Math.floor(W/4294967296),4294967295)|0)>>>0:~~+Math.ceil((W-+(~~W>>>0))/4294967296)>>>0:0)],F[t+80>>2]=ie[0],F[t+84>>2]=ie[1],0},doMsync:function(e,r,t,n,s){var u=G.slice(e,e+t);i.msync(r,u,s,t,n)},varargs:void 0,get:function(){X.varargs+=4;var e=F[X.varargs-4>>2];return e},getStr:function(e){var r=Lr(e);return r},getStreamFromFD:function(e){var r=i.getStream(e);if(!r)throw new i.ErrnoError(8);return r}};function Xt(e,r,t){X.varargs=t;try{var n=X.getStreamFromFD(e);switch(r){case 0:{var s=X.get();if(s<0)return-28;var u;return u=i.createStream(n,s),u.fd}case 1:case 2:return 0;case 3:return n.flags;case 4:{var s=X.get();return n.flags|=s,0}case 5:{var s=X.get(),f=0;return de[s+f>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Ht(28),-1;default:return-28}}catch(c){if(typeof i>"u"||!(c instanceof i.ErrnoError))throw c;return-c.errno}}function Jt(e,r,t,n){X.varargs=n;try{r=X.getStr(r),r=X.calculateAt(e,r);var s=n?X.get():0;return i.open(r,t,s).fd}catch(u){if(typeof i>"u"||!(u instanceof i.ErrnoError))throw u;return-u.errno}}function Kt(e,r,t,n,s){}function mr(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function Yt(){for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);Yr=e}var Yr=void 0;function Q(e){for(var r="",t=e;G[t];)r+=Yr[G[t++]];return r}var _e={},me={},Ye={},Qt=48,Zt=57;function Qe(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return r>=Qt&&r<=Zt?"_"+e:e}function gr(e,r){return e=Qe(e),new Function("body","return function "+e+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(r)}function yr(e,r){var t=gr(r,function(n){this.name=r,this.message=n;var s=new Error(n).stack;s!==void 0&&(this.stack=this.toString()+`
`+s.replace(/^Error(:[^\n]*)?\n/,""))});return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},t}var Ee=void 0;function N(e){throw new Ee(e)}var Qr=void 0;function Ze(e){throw new Qr(e)}function Ce(e,r,t){e.forEach(function(c){Ye[c]=r});function n(c){var l=t(c);l.length!==e.length&&Ze("Mismatched type converter count");for(var p=0;p<e.length;++p)se(e[p],l[p])}var s=new Array(r.length),u=[],f=0;r.forEach((c,l)=>{me.hasOwnProperty(c)?s[l]=me[c]:(u.push(c),_e.hasOwnProperty(c)||(_e[c]=[]),_e[c].push(()=>{s[l]=me[c],++f,f===u.length&&n(s)}))}),u.length===0&&n(s)}function se(e,r,t={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=r.name;if(e||N('type "'+n+'" must have a positive integer typeid pointer'),me.hasOwnProperty(e)){if(t.ignoreDuplicateRegistrations)return;N("Cannot register type '"+n+"' twice")}if(me[e]=r,delete Ye[e],_e.hasOwnProperty(e)){var s=_e[e];delete _e[e],s.forEach(u=>u())}}function en(e,r,t,n,s){var u=mr(t);r=Q(r),se(e,{name:r,fromWireType:function(f){return!!f},toWireType:function(f,c){return c?n:s},argPackAdvance:8,readValueFromPointer:function(f){var c;if(t===1)c=Y;else if(t===2)c=de;else if(t===4)c=F;else throw new TypeError("Unknown boolean type size: "+r);return this.fromWireType(c[f>>u])},destructorFunction:null})}function rn(e){if(!(this instanceof fe)||!(e instanceof fe))return!1;for(var r=this.$$.ptrType.registeredClass,t=this.$$.ptr,n=e.$$.ptrType.registeredClass,s=e.$$.ptr;r.baseClass;)t=r.upcast(t),r=r.baseClass;for(;n.baseClass;)s=n.upcast(s),n=n.baseClass;return r===n&&t===s}function tn(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function wr(e){function r(t){return t.$$.ptrType.registeredClass.name}N(r(e)+" instance already deleted")}var _r=!1;function Zr(e){}function nn(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function et(e){e.count.value-=1;var r=e.count.value===0;r&&nn(e)}function rt(e,r,t){if(r===t)return e;if(t.baseClass===void 0)return null;var n=rt(e,r,t.baseClass);return n===null?null:t.downcast(n)}var tt={};function on(){return Object.keys(ke).length}function sn(){var e=[];for(var r in ke)ke.hasOwnProperty(r)&&e.push(ke[r]);return e}var Se=[];function Er(){for(;Se.length;){var e=Se.pop();e.$$.deleteScheduled=!1,e.delete()}}var Ae=void 0;function an(e){Ae=e,Se.length&&Ae&&Ae(Er)}function un(){o.getInheritedInstanceCount=on,o.getLiveInheritedInstances=sn,o.flushPendingDeletes=Er,o.setDelayFunction=an}var ke={};function cn(e,r){for(r===void 0&&N("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r}function fn(e,r){return r=cn(e,r),ke[r]}function er(e,r){(!r.ptrType||!r.ptr)&&Ze("makeClassHandle requires ptr and ptrType");var t=!!r.smartPtrType,n=!!r.smartPtr;return t!==n&&Ze("Both smartPtrType and smartPtr must be specified"),r.count={value:1},Fe(Object.create(e,{$$:{value:r}}))}function ln(e){var r=this.getPointee(e);if(!r)return this.destructor(e),null;var t=fn(this.registeredClass,r);if(t!==void 0){if(t.$$.count.value===0)return t.$$.ptr=r,t.$$.smartPtr=e,t.clone();var n=t.clone();return this.destructor(e),n}function s(){return this.isSmartPointer?er(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):er(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var u=this.registeredClass.getActualType(r),f=tt[u];if(!f)return s.call(this);var c;this.isConst?c=f.constPointerType:c=f.pointerType;var l=rt(r,this.registeredClass,c.registeredClass);return l===null?s.call(this):this.isSmartPointer?er(c.registeredClass.instancePrototype,{ptrType:c,ptr:l,smartPtrType:this,smartPtr:e}):er(c.registeredClass.instancePrototype,{ptrType:c,ptr:l})}function Fe(e){return typeof FinalizationRegistry>"u"?(Fe=r=>r,e):(_r=new FinalizationRegistry(r=>{et(r.$$)}),Fe=r=>{var t=r.$$,n=!!t.smartPtr;if(n){var s={$$:t};_r.register(r,s,r)}return r},Zr=r=>_r.unregister(r),Fe(e))}function dn(){if(this.$$.ptr||wr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Fe(Object.create(Object.getPrototypeOf(this),{$$:{value:tn(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function hn(){this.$$.ptr||wr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&N("Object already scheduled for deletion"),Zr(this),et(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function pn(){return!this.$$.ptr}function vn(){return this.$$.ptr||wr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&N("Object already scheduled for deletion"),Se.push(this),Se.length===1&&Ae&&Ae(Er),this.$$.deleteScheduled=!0,this}function mn(){fe.prototype.isAliasOf=rn,fe.prototype.clone=dn,fe.prototype.delete=hn,fe.prototype.isDeleted=pn,fe.prototype.deleteLater=vn}function fe(){}function nt(e,r,t){if(e[r].overloadTable===void 0){var n=e[r];e[r]=function(){return e[r].overloadTable.hasOwnProperty(arguments.length)||N("Function '"+t+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[r].overloadTable+")!"),e[r].overloadTable[arguments.length].apply(this,arguments)},e[r].overloadTable=[],e[r].overloadTable[n.argCount]=n}}function gn(e,r,t){o.hasOwnProperty(e)?((t===void 0||o[e].overloadTable!==void 0&&o[e].overloadTable[t]!==void 0)&&N("Cannot register public name '"+e+"' twice"),nt(o,e,e),o.hasOwnProperty(t)&&N("Cannot register multiple overloads of a function with the same number of arguments ("+t+")!"),o[e].overloadTable[t]=r):(o[e]=r,t!==void 0&&(o[e].numArguments=t))}function yn(e,r,t,n,s,u,f,c){this.name=e,this.constructor=r,this.instancePrototype=t,this.rawDestructor=n,this.baseClass=s,this.getActualType=u,this.upcast=f,this.downcast=c,this.pureVirtualFunctions=[]}function br(e,r,t){for(;r!==t;)r.upcast||N("Expected null or instance of "+t.name+", got an instance of "+r.name),e=r.upcast(e),r=r.baseClass;return e}function wn(e,r){if(r===null)return this.isReference&&N("null is not a valid "+this.name),0;r.$$||N('Cannot pass "'+Dr(r)+'" as a '+this.name),r.$$.ptr||N("Cannot pass deleted object as a pointer of type "+this.name);var t=r.$$.ptrType.registeredClass,n=br(r.$$.ptr,t,this.registeredClass);return n}function _n(e,r){var t;if(r===null)return this.isReference&&N("null is not a valid "+this.name),this.isSmartPointer?(t=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,t),t):0;r.$$||N('Cannot pass "'+Dr(r)+'" as a '+this.name),r.$$.ptr||N("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&r.$$.ptrType.isConst&&N("Cannot convert argument of type "+(r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name)+" to parameter type "+this.name);var n=r.$$.ptrType.registeredClass;if(t=br(r.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&N("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?t=r.$$.smartPtr:N("Cannot convert argument of type "+(r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:t=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)t=r.$$.smartPtr;else{var s=r.clone();t=this.rawShare(t,tr.toHandle(function(){s.delete()})),e!==null&&e.push(this.rawDestructor,t)}break;default:N("Unsupporting sharing policy")}return t}function En(e,r){if(r===null)return this.isReference&&N("null is not a valid "+this.name),0;r.$$||N('Cannot pass "'+Dr(r)+'" as a '+this.name),r.$$.ptr||N("Cannot pass deleted object as a pointer of type "+this.name),r.$$.ptrType.isConst&&N("Cannot convert argument of type "+r.$$.ptrType.name+" to parameter type "+this.name);var t=r.$$.ptrType.registeredClass,n=br(r.$$.ptr,t,this.registeredClass);return n}function rr(e){return this.fromWireType(x[e>>2])}function bn(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Pn(e){this.rawDestructor&&this.rawDestructor(e)}function Tn(e){e!==null&&e.delete()}function Dn(){ae.prototype.getPointee=bn,ae.prototype.destructor=Pn,ae.prototype.argPackAdvance=8,ae.prototype.readValueFromPointer=rr,ae.prototype.deleteObject=Tn,ae.prototype.fromWireType=ln}function ae(e,r,t,n,s,u,f,c,l,p,E){this.name=e,this.registeredClass=r,this.isReference=t,this.isConst=n,this.isSmartPointer=s,this.pointeeType=u,this.sharingPolicy=f,this.rawGetPointee=c,this.rawConstructor=l,this.rawShare=p,this.rawDestructor=E,!s&&r.baseClass===void 0?n?(this.toWireType=wn,this.destructorFunction=null):(this.toWireType=En,this.destructorFunction=null):this.toWireType=_n}function Cn(e,r,t){o.hasOwnProperty(e)||Ze("Replacing nonexistant public symbol"),o[e].overloadTable!==void 0&&t!==void 0?o[e].overloadTable[t]=r:(o[e]=r,o[e].argCount=t)}function Sn(e,r,t){var n=o["dynCall_"+e];return t&&t.length?n.apply(null,[r].concat(t)):n.call(null,r)}function An(e,r,t){return e.includes("j")?Sn(e,r,t):Ke(r).apply(null,t)}function kn(e,r){var t=[];return function(){return t.length=0,Object.assign(t,arguments),An(e,r,t)}}function be(e,r){e=Q(e);function t(){return e.includes("j")?kn(e,r):Ke(r)}var n=t();return typeof n!="function"&&N("unknown function pointer with signature "+e+": "+r),n}var it=void 0;function ot(e){var r=ht(e),t=Q(r);return ue(r),t}function Pr(e,r){var t=[],n={};function s(u){if(!n[u]&&!me[u]){if(Ye[u]){Ye[u].forEach(s);return}t.push(u),n[u]=!0}}throw r.forEach(s),new it(e+": "+t.map(ot).join([", "]))}function Fn(e,r,t,n,s,u,f,c,l,p,E,b,y){E=Q(E),u=be(s,u),c&&(c=be(f,c)),p&&(p=be(l,p)),y=be(b,y);var P=Qe(E);gn(P,function(){Pr("Cannot construct "+E+" due to unbound types",[n])}),Ce([e,r,t],n?[n]:[],function(C){C=C[0];var U,z;n?(U=C.registeredClass,z=U.instancePrototype):z=fe.prototype;var V=gr(P,function(){if(Object.getPrototypeOf(this)!==K)throw new Ee("Use 'new' to construct "+E);if(q.constructor_body===void 0)throw new Ee(E+" has no accessible constructor");var B=q.constructor_body[arguments.length];if(B===void 0)throw new Ee("Tried to invoke ctor of "+E+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(q.constructor_body).toString()+") parameters instead!");return B.apply(this,arguments)}),K=Object.create(z,{constructor:{value:V}});V.prototype=K;var q=new yn(E,V,K,y,U,u,c,p),ge=new ae(E,q,!0,!1,!1),Z=new ae(E+"*",q,!1,!1,!1),ce=new ae(E+" const*",q,!1,!0,!1);return tt[e]={pointerType:Z,constPointerType:ce},Cn(P,V),[ge,Z,ce]})}function st(e,r){for(var t=[],n=0;n<e;n++)t.push(F[(r>>2)+n]);return t}function On(e){for(;e.length;){var r=e.pop(),t=e.pop();t(r)}}function at(e,r){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var t=gr(e.name||"unknownFunctionName",function(){});t.prototype=e.prototype;var n=new t,s=e.apply(n,r);return s instanceof Object?s:n}function ut(e,r,t,n,s){var u=r.length;u<2&&N("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var f=r[1]!==null&&t!==null,c=!1,l=1;l<r.length;++l)if(r[l]!==null&&r[l].destructorFunction===void 0){c=!0;break}for(var p=r[0].name!=="void",E="",b="",l=0;l<u-2;++l)E+=(l!==0?", ":"")+"arg"+l,b+=(l!==0?", ":"")+"arg"+l+"Wired";var y="return function "+Qe(e)+"("+E+`) {
if (arguments.length !== `+(u-2)+`) {
throwBindingError('function `+e+" called with ' + arguments.length + ' arguments, expected "+(u-2)+` args!');
}
`;c&&(y+=`var destructors = [];
`);var P=c?"destructors":"null",C=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],U=[N,n,s,On,r[0],r[1]];f&&(y+="var thisWired = classParam.toWireType("+P+`, this);
`);for(var l=0;l<u-2;++l)y+="var arg"+l+"Wired = argType"+l+".toWireType("+P+", arg"+l+"); // "+r[l+2].name+`
`,C.push("argType"+l),U.push(r[l+2]);if(f&&(b="thisWired"+(b.length>0?", ":"")+b),y+=(p?"var rv = ":"")+"invoker(fn"+(b.length>0?", ":"")+b+`);
`,c)y+=`runDestructors(destructors);
`;else for(var l=f?1:2;l<r.length;++l){var z=l===1?"thisWired":"arg"+(l-2)+"Wired";r[l].destructorFunction!==null&&(y+=z+"_dtor("+z+"); // "+r[l].name+`
`,C.push(z+"_dtor"),U.push(r[l].destructorFunction))}p&&(y+=`var ret = retType.fromWireType(rv);
return ret;
`),y+=`}
`,C.push(y);var V=at(Function,C).apply(null,U);return V}function $n(e,r,t,n,s,u){Ur(r>0);var f=st(r,t);s=be(n,s),Ce([],[e],function(c){c=c[0];var l="constructor "+c.name;if(c.registeredClass.constructor_body===void 0&&(c.registeredClass.constructor_body=[]),c.registeredClass.constructor_body[r-1]!==void 0)throw new Ee("Cannot register multiple constructors with identical number of parameters ("+(r-1)+") for class '"+c.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return c.registeredClass.constructor_body[r-1]=()=>{Pr("Cannot construct "+c.name+" due to unbound types",f)},Ce([],f,function(p){return p.splice(1,0,null),c.registeredClass.constructor_body[r-1]=ut(l,p,null,s,u),[]}),[]})}function Rn(e,r,t,n,s,u,f,c){var l=st(t,n);r=Q(r),u=be(s,u),Ce([],[e],function(p){p=p[0];var E=p.name+"."+r;r.startsWith("@@")&&(r=Symbol[r.substring(2)]),c&&p.registeredClass.pureVirtualFunctions.push(r);function b(){Pr("Cannot call "+E+" due to unbound types",l)}var y=p.registeredClass.instancePrototype,P=y[r];return P===void 0||P.overloadTable===void 0&&P.className!==p.name&&P.argCount===t-2?(b.argCount=t-2,b.className=p.name,y[r]=b):(nt(y,r,E),y[r].overloadTable[t-2]=b),Ce([],l,function(C){var U=ut(E,C,p,u,f);return y[r].overloadTable===void 0?(U.argCount=t-2,y[r]=U):y[r].overloadTable[t-2]=U,[]}),[]})}var Tr=[],ne=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ct(e){e>4&&--ne[e].refcount===0&&(ne[e]=void 0,Tr.push(e))}function Nn(){for(var e=0,r=5;r<ne.length;++r)ne[r]!==void 0&&++e;return e}function In(){for(var e=5;e<ne.length;++e)if(ne[e]!==void 0)return ne[e];return null}function Mn(){o.count_emval_handles=Nn,o.get_first_emval=In}var tr={toValue:e=>(e||N("Cannot use deleted val. handle = "+e),ne[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var r=Tr.length?Tr.pop():ne.length;return ne[r]={refcount:1,value:e},r}}}};function Un(e,r){r=Q(r),se(e,{name:r,fromWireType:function(t){var n=tr.toValue(t);return ct(t),n},toWireType:function(t,n){return tr.toHandle(n)},argPackAdvance:8,readValueFromPointer:rr,destructorFunction:null})}function Dr(e){if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e}function jn(e,r){switch(r){case 2:return function(t){return this.fromWireType(zr[t>>2])};case 3:return function(t){return this.fromWireType(Br[t>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Ln(e,r,t){var n=mr(t);r=Q(r),se(e,{name:r,fromWireType:function(s){return s},toWireType:function(s,u){return u},argPackAdvance:8,readValueFromPointer:jn(r,n),destructorFunction:null})}function xn(e,r,t){switch(r){case 0:return t?function(s){return Y[s]}:function(s){return G[s]};case 1:return t?function(s){return de[s>>1]}:function(s){return Ge[s>>1]};case 2:return t?function(s){return F[s>>2]}:function(s){return x[s>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function zn(e,r,t,n,s){r=Q(r);var u=mr(t),f=b=>b;if(n===0){var c=32-8*t;f=b=>b<<c>>>c}var l=r.includes("unsigned"),p=(b,y)=>{},E;l?E=function(b,y){return p(y,this.name),y>>>0}:E=function(b,y){return p(y,this.name),y},se(e,{name:r,fromWireType:f,toWireType:E,argPackAdvance:8,readValueFromPointer:xn(r,u,n!==0),destructorFunction:null})}function Bn(e,r,t){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],s=n[r];function u(f){f=f>>2;var c=x,l=c[f],p=c[f+1];return new s(hr,p,l)}t=Q(t),se(e,{name:t,fromWireType:u,argPackAdvance:8,readValueFromPointer:u},{ignoreDuplicateRegistrations:!0})}function Hn(e,r){r=Q(r);var t=r==="std::string";se(e,{name:r,fromWireType:function(n){var s=x[n>>2],u;if(t)for(var f=n+4,c=0;c<=s;++c){var l=n+4+c;if(c==s||G[l]==0){var p=l-f,E=Lr(f,p);u===void 0?u=E:(u+=String.fromCharCode(0),u+=E),f=l+1}}else{for(var b=new Array(s),c=0;c<s;++c)b[c]=String.fromCharCode(G[n+4+c]);u=b.join("")}return ue(n),u},toWireType:function(n,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var u,f=typeof s=="string";f||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||N("Cannot pass non-string to std::string"),t&&f?u=()=>dr(s):u=()=>s.length;var c=u(),l=or(4+c+1);if(x[l>>2]=c,t&&f)bt(s,l+4,c+1);else if(f)for(var p=0;p<c;++p){var E=s.charCodeAt(p);E>255&&(ue(l),N("String has UTF-16 code units that do not fit in 8 bits")),G[l+4+p]=E}else for(var p=0;p<c;++p)G[l+4+p]=s[p];return n!==null&&n.push(ue,l),l},argPackAdvance:8,readValueFromPointer:rr,destructorFunction:function(n){ue(n)}})}function Wn(e,r,t){t=Q(t);var n,s,u,f,c;r===2?(n=Pt,s=Tt,f=Dt,u=()=>Ge,c=1):r===4&&(n=Ct,s=St,f=At,u=()=>x,c=2),se(e,{name:t,fromWireType:function(l){for(var p=x[l>>2],E=u(),b,y=l+4,P=0;P<=p;++P){var C=l+4+P*r;if(P==p||E[C>>c]==0){var U=C-y,z=n(y,U);b===void 0?b=z:(b+=String.fromCharCode(0),b+=z),y=C+r}}return ue(l),b},toWireType:function(l,p){typeof p!="string"&&N("Cannot pass non-string to C++ string type "+t);var E=f(p),b=or(4+E+r);return x[b>>2]=E>>c,s(p,b+4,E+r),l!==null&&l.push(ue,b),b},argPackAdvance:8,readValueFromPointer:rr,destructorFunction:function(l){ue(l)}})}function Vn(e,r){r=Q(r),se(e,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:function(){},toWireType:function(t,n){}})}function qn(){return Date.now()}var Gn={};function Xn(e){var r=Gn[e];return r===void 0?Q(e):r}var Cr=[];function Jn(e,r,t,n){e=Cr[e],r=tr.toValue(r),t=Xn(t),e(r,t,null,n)}function Kn(e){var r=Cr.length;return Cr.push(e),r}function Yn(e,r){var t=me[e];return t===void 0&&N(r+" has unknown type "+ot(e)),t}function Qn(e,r){for(var t=new Array(e),n=0;n<e;++n)t[n]=Yn(x[r+n*fr>>2],"parameter "+n);return t}var ft=[];function Zn(e,r){var t=Qn(e,r),n=t[0],s=n.name+"_$"+t.slice(1).map(function(C){return C.name}).join("_")+"$",u=ft[s];if(u!==void 0)return u;for(var f=["retType"],c=[n],l="",p=0;p<e-1;++p)l+=(p!==0?", ":"")+"arg"+p,f.push("argType"+p),c.push(t[1+p]);for(var E=Qe("methodCaller_"+s),b="return function "+E+`(handle, name, destructors, args) {
`,y=0,p=0;p<e-1;++p)b+="    var arg"+p+" = argType"+p+".readValueFromPointer(args"+(y?"+"+y:"")+`);
`,y+=t[p+1].argPackAdvance;b+="    var rv = handle[name]("+l+`);
`;for(var p=0;p<e-1;++p)t[p+1].deleteObject&&(b+="    argType"+p+".deleteObject(arg"+p+`);
`);n.isVoid||(b+=`    return retType.toWireType(destructors, rv);
`),b+=`};
`,f.push(b);var P=at(Function,f).apply(null,c);return u=Kn(P),ft[s]=u,u}function ei(){pe("")}function ri(){return G.length}function ti(){return ri()}function ni(e,r,t){G.copyWithin(e,r,r+t)}function ii(e){pe("OOM")}function oi(e){G.length,ii()}var Sr={};function si(){return w||"./this.program"}function Oe(){if(!Oe.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:si()};for(var t in Sr)Sr[t]===void 0?delete r[t]:r[t]=Sr[t];var n=[];for(var t in r)n.push(t+"="+r[t]);Oe.strings=n}return Oe.strings}function ai(e,r){var t=0;return Oe().forEach(function(n,s){var u=r+t;x[e+s*4>>2]=u,kt(n,u),t+=n.length+1}),0}function ui(e,r){var t=Oe();x[e>>2]=t.length;var n=0;return t.forEach(function(s){n+=s.length+1}),x[r>>2]=n,0}function ci(e){try{var r=X.getStreamFromFD(e);return i.close(r),0}catch(t){if(typeof i>"u"||!(t instanceof i.ErrnoError))throw t;return t.errno}}function fi(e,r){try{var t=X.getStreamFromFD(e),n=t.tty?2:i.isDir(t.mode)?3:i.isLink(t.mode)?7:4;return Y[r>>0]=n,0}catch(s){if(typeof i>"u"||!(s instanceof i.ErrnoError))throw s;return s.errno}}function li(e,r,t,n){for(var s=0,u=0;u<t;u++){var f=x[r>>2],c=x[r+4>>2];r+=8;var l=i.read(e,Y,f,c,n);if(l<0)return-1;if(s+=l,l<c)break}return s}function di(e,r,t,n){try{var s=X.getStreamFromFD(e),u=li(s,r,t);return F[n>>2]=u,0}catch(f){if(typeof i>"u"||!(f instanceof i.ErrnoError))throw f;return f.errno}}function hi(e,r){return r+2097152>>>0<4194305-!!e?(e>>>0)+r*4294967296:NaN}function pi(e,r,t,n,s){try{var u=hi(r,t);if(isNaN(u))return 61;var f=X.getStreamFromFD(e);return i.llseek(f,u,n),ie=[f.position>>>0,(W=f.position,+Math.abs(W)>=1?W>0?(Math.min(+Math.floor(W/4294967296),4294967295)|0)>>>0:~~+Math.ceil((W-+(~~W>>>0))/4294967296)>>>0:0)],F[s>>2]=ie[0],F[s+4>>2]=ie[1],f.getdents&&u===0&&n===0&&(f.getdents=null),0}catch(c){if(typeof i>"u"||!(c instanceof i.ErrnoError))throw c;return c.errno}}function vi(e,r,t,n){for(var s=0,u=0;u<t;u++){var f=x[r>>2],c=x[r+4>>2];r+=8;var l=i.write(e,Y,f,c,n);if(l<0)return-1;s+=l}return s}function mi(e,r,t,n){try{var s=X.getStreamFromFD(e),u=vi(s,r,t);return x[n>>2]=u,0}catch(f){if(typeof i>"u"||!(f instanceof i.ErrnoError))throw f;return f.errno}}function gi(e){}var lt=function(e,r,t,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=i.nextInode++,this.name=r,this.mode=t,this.node_ops={},this.stream_ops={},this.rdev=n},nr=365,ir=146;Object.defineProperties(lt.prototype,{read:{get:function(){return(this.mode&nr)===nr},set:function(e){e?this.mode|=nr:this.mode&=~nr}},write:{get:function(){return(this.mode&ir)===ir},set:function(e){e?this.mode|=ir:this.mode&=~ir}},isFolder:{get:function(){return i.isDir(this.mode)}},isDevice:{get:function(){return i.isChrdev(this.mode)}}}),i.FSNode=lt,i.staticInit(),Yt(),Ee=o.BindingError=yr(Error,"BindingError"),Qr=o.InternalError=yr(Error,"InternalError"),mn(),un(),Dn(),it=o.UnboundTypeError=yr(Error,"UnboundTypeError"),Mn();function Ar(e,r,t){var n=t>0?t:dr(e)+1,s=new Array(n),u=lr(e,s,0,s.length);return r&&(s.length=u),s}var yi={q:xt,p:Bt,D:Xt,x:Jt,t:Kt,F:en,u:Fn,r:$n,d:Rn,E:Un,l:Ln,c:zn,b:Bn,k:Hn,g:Wn,o:Vn,f:qn,i:Jn,n:ct,m:Zn,a:ei,w:ti,B:ni,v:oi,z:ai,A:ui,j:ci,y:fi,C:di,s:pi,h:mi,e:gi};Lt(),o.___wasm_call_ctors=function(){return(o.___wasm_call_ctors=o.asm.H).apply(null,arguments)};var or=o._malloc=function(){return(or=o._malloc=o.asm.I).apply(null,arguments)},ue=o._free=function(){return(ue=o._free=o.asm.K).apply(null,arguments)},dt=o.___errno_location=function(){return(dt=o.___errno_location=o.asm.L).apply(null,arguments)},ht=o.___getTypeName=function(){return(ht=o.___getTypeName=o.asm.M).apply(null,arguments)};o.___embind_register_native_and_builtin_types=function(){return(o.___embind_register_native_and_builtin_types=o.asm.N).apply(null,arguments)};var pt=o._emscripten_builtin_memalign=function(){return(pt=o._emscripten_builtin_memalign=o.asm.O).apply(null,arguments)},vt=o.___cxa_is_pointer_type=function(){return(vt=o.___cxa_is_pointer_type=o.asm.P).apply(null,arguments)};o.dynCall_viiijj=function(){return(o.dynCall_viiijj=o.asm.Q).apply(null,arguments)},o.dynCall_jij=function(){return(o.dynCall_jij=o.asm.R).apply(null,arguments)},o.dynCall_jii=function(){return(o.dynCall_jii=o.asm.S).apply(null,arguments)},o.dynCall_jiji=function(){return(o.dynCall_jiji=o.asm.T).apply(null,arguments)};var sr;function wi(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}De=function e(){sr||kr(),sr||(De=e)};function kr(e){if(he>0||(Ot(),he>0))return;function r(){sr||(sr=!0,o.calledRun=!0,!Mr&&($t(),d(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),Rt()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),r()},1)):r()}if(o.run=kr,o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return kr(),o.ready}})(),Ni=Object.defineProperty,Ii=Object.getOwnPropertyDescriptor,He=(h,a,o,d)=>{for(var v=d>1?void 0:d?Ii(a,o):a,g=h.length-1,w;g>=0;g--)(w=h[g])&&(v=(d?w(a,o,v):w(v))||v);return d&&v&&Ni(a,o,v),v};class We extends O{constructor(){super(...arguments),this.sampleRate=0,this.channels=0}initialize(){return new Promise(a=>{const o={};o.print=d=>console.log(d),o.printErr=d=>console.log(`[JS] ERROR: ${d}`),o.onAbort=()=>console.log("[JS] FATAL: WASM ABORTED"),o.postRun=d=>{this.module=d,this.decoder=new this.module.AudioDecoder(this),a()},Ri(o)})}configure(a){this.config=a,this.decoder.setCodec(this.config.codec,this.config.description)}decode(a){this.decoder.decode(a.data,a.timestamp)}flush(){}reset(){this.config=void 0,this.decoder&&this.decoder.clear()}close(){this.removeAllListeners(),this.decoder&&(this.decoder.clear(),this.decoder.delete())}audioInfo(a,o){this.sampleRate=a,this.channels=o;let d={sampleRate:a,channels:o,depth:16};this.emit(Te.AudioCodecInfo,d)}pcmData(a,o,d){if(!this.module)return;let v=[];for(let w=0;w<this.channels;w++){let A=this.module.HEAPU32[(a>>2)+w]>>2;v.push(Float32Array.of(...this.module.HEAPF32.subarray(A,A+o)))}let g={datas:v,sampleNum:o,channles:this.channels,pts:d};this.emit(Te.AudioFrame,g)}errorInfo(a){let o={errMsg:a};this.emit(Te.Error,o)}}He([H(O.INIT,"initialized")],We.prototype,"initialize",1);He([H("initialized","configured")],We.prototype,"configure",1);He([Me("configured")],We.prototype,"decode",1);He([H("configured","initialized")],We.prototype,"reset",1);He([H([],"closed")],We.prototype,"close",1);var Mi=Object.defineProperty,Ui=Object.getOwnPropertyDescriptor,Ve=(h,a,o,d)=>{for(var v=d>1?void 0:d?Ui(a,o):a,g=h.length-1,w;g>=0;g--)(w=h[g])&&(v=(d?w(a,o,v):w(v))||v);return d&&v&&Mi(a,o,v),v};class qe extends O{async initialize(){this.decoder=new AudioDecoder({output:a=>{this.emit(Te.AudioFrame,a)},error:a=>{this.emit(Te.Error,a),this.close()}})}configure(a){this.config=a,this.decoder.configure({codec:{aac:"mp4a.40.2",pcma:"alaw",pcmu:"ulaw"}[a.codec],description:a.description,sampleRate:a.sampleRate,numberOfChannels:a.numberOfChannels})}decode(a){this.decoder.state==="configured"&&this.decoder.decode(new EncodedAudioChunk(a))}flush(){this.decoder.flush()}reset(){this.decoder.reset()}close(){this.decoder.close()}}Ve([H([O.INIT,"closed"],"initialized")],qe.prototype,"initialize",1);Ve([H("initialized","configured")],qe.prototype,"configure",1);Ve([Me("configured")],qe.prototype,"decode",1);Ve([H([],O.INIT)],qe.prototype,"reset",1);Ve([H([],"closed",{ignoreError:!0})],qe.prototype,"close",1);var ur=(h=>(h.AUDIO_ENCODER_CONFIG_CHANGED="audio-encoder-config-changed",h.VIDEO_ENCODER_CONFIG_CHANGED="video-encoder-config-changed",h))(ur||{}),cr=(h=>(h[h.PULL=0]="PULL",h[h.PUSH=1]="PUSH",h))(cr||{});class ji extends Ne.EventEmitter{constructor(a,o=0){super(),this.source=a,this.mode=o,Object.getPrototypeOf(this).constructor.name,a&&(o==0?this.startPull(a):a.oput=new Ue(this.demux()))}startPull(a){this.mode=0,this.source=a,this.audioReadable=new ReadableStream({pull:async o=>o.enqueue(await this.pullAudio())}),this.videoReadable=new ReadableStream({pull:async o=>o.enqueue(await this.pullVideo())})}pullAudio(){return new Promise((a,o)=>{this.gotAudio=a,this.gotVideo&&this.pull().catch(o)})}pullVideo(){return new Promise((a,o)=>{this.gotVideo=a,this.gotAudio&&this.pull().catch(o)})}}const _t=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,-1,-1,-1];function Zi(h){const a=((h[2]&192)>>>6)+1,o=(h[2]&60)>>>2,d=(h[2]&1)<<2|(h[3]&192)>>>6,v=new Uint8Array([(a&3)<<3|(o&14)>>1,(o&1)<<7|(d&15)<<3]);return{profile:a,sampleRate:_t[o],channel:d,audioSpecificConfig:v}}class eo extends ji{constructor(){super(...arguments),this.tmp8=new Uint8Array(4),this.dv=new DataView(this.tmp8.buffer)}async pullTag(){const a=new Uint8Array(15);return this.pullTag=async()=>{await this.source.read(a);const o=a[4],d=this.readLength(a.subarray(5,8)),v=this.readTimestamp(a.subarray(8,11)),g=await this.source.read(d);return{type:o,data:g.slice(),timestamp:v}},console.time("flv"),await this.source.read(9).then(o=>{if(this.header=o,o[0]!="F".charCodeAt(0)||o[1]!="L".charCodeAt(0)||o[2]!="V".charCodeAt(0))throw new Error("not flv");console.timeEnd("flv")}),this.pullTag()}readTag(a){const o=a[0],d=this.readLength(a.subarray(1,4)),v=this.readTimestamp(a.subarray(4,8));this.gotTag(o,a.subarray(11,11+d),v)}gotTag(a,o,d){var v,g;switch(a){case 8:return this.audioDecoderConfig||(this.audioDecoderConfig={codec:{10:"aac",7:"pcma",8:"pcmu"}[o[0]>>4]||"unknown",numberOfChannels:1,sampleRate:8e3},this.audioDecoderConfig.codec=="aac"?(this.audioDecoderConfig.numberOfChannels=o[3]>>3&15,this.audioDecoderConfig.sampleRate=_t[(o[2]&7)<<1|o[3]>>7]):this.emit(ur.AUDIO_ENCODER_CONFIG_CHANGED,this.audioDecoderConfig)),this.audioDecoderConfig.codec=="aac"&&o[1]==0?(this.audioDecoderConfig.description=o.subarray(2),this.emit(ur.AUDIO_ENCODER_CONFIG_CHANGED,this.audioDecoderConfig),this.mode==cr.PULL?this.pull():void 0):(v=this.gotAudio)==null?void 0:v.call(this,{type:"key",data:this.audioDecoderConfig.codec=="aac"?o.subarray(2):o.subarray(1),timestamp:d,duration:0});case 9:return this.videoDecoderConfig||(this.videoDecoderConfig={codec:{7:"avc",12:"hevc"}[o[0]&15]||"unknown",description:o.subarray(5)}),o[1]==0?(this.emit(ur.VIDEO_ENCODER_CONFIG_CHANGED,this.videoDecoderConfig),this.mode==cr.PULL?this.pull():void 0):(g=this.gotVideo)==null?void 0:g.call(this,{type:o[0]>>4==1?"key":"delta",data:o.subarray(5),timestamp:d,duration:0});default:if(this.mode==cr.PULL)return this.pull()}}async pull(){const a=await this.pullTag();if(a)return this.gotTag(a.type,a.data,a.timestamp)}readLength(a){return this.tmp8[0]=0,this.tmp8.set(a,1),this.dv.getUint32(0)}readTimestamp(a){this.tmp8.set(a.subarray(0,3),1);let o=this.dv.getUint32(0);return o===16777215&&(this.tmp8[0]=a[3],o=this.dv.getUint32(0)),o}readHead(a){if(console.time("flv"),this.header=a,a[0]!="F".charCodeAt(0)||a[1]!="L".charCodeAt(0)||a[2]!="V".charCodeAt(0))throw new Error("not flv");console.timeEnd("flv")}*demux(){for(this.readHead(yield 13);;){let a=yield 11;const o=a[0],d=this.readLength(a.subarray(1,4)),v=this.readTimestamp(a.subarray(4,8));a=yield d,this.gotTag(o,a.slice(),v),yield 4}}}const ro=_i({id:"app-device-store",state:()=>({deviceList:[],deviceTree:[],deviceArr:[]}),actions:{setDeviceList(h){this.deviceList=h},setDeviceTree(h){this.deviceTree=h},setDeviceArr(h){this.deviceArr=h},async fetchDeviceList(){const h=await mt();h.length>1&&h.sort((a,o)=>Number(a.ID)-Number(o.ID)),h.map(a=>{var o;return((o=a.Channels)==null?void 0:o.length)>1&&a.Channels.sort((d,v)=>Number(d.Name)-Number(v.Name)),a}),this.setDeviceList(h||[])},async fetchdeviceTree(){const h=await mt();h.length>1&&h.sort((g,w)=>Number(g.ID)-Number(w.ID)),h.map(g=>{var w;return((w=g.Channels)==null?void 0:w.length)>1&&g.Channels.sort((A,S)=>Number(A.Name)-Number(S.Name)),g});const a=Li(h)||[],o={title:"å®žæ—¶æµ",ID:"liveStreams",DeviceName:"å®žæ—¶æµ",key:"liveStreams",selectable:!1,children:[]};a.push(o);const d=await Ei();d.Streams&&d.Streams.forEach(g=>{const w=g.Path.split("/");o.children.push({title:g.Path,key:g.Path,ID:w[0],DeviceName:g.Path,DeviceID:w.slice(1).join("/"),LiveStatus:2,Name:g.Path,selectable:!0,disabled:!1})}),this.setDeviceTree(a);const v=Et(a);this.setDeviceArr(v)}}});function Li(h){const a=[];return h!=null&&h.length&&h.map(({Channels:o,ID:d,Name:v})=>{a.push({title:v||d,key:d,ID:d,DeviceName:v,children:xi(o,{ID:d,DeviceName:v}),selectable:!1})}),a}const xi=(h,a)=>{const o=[];if(h!=null&&h.length){const d=JSON.parse(JSON.stringify(h)),v=d.reduce((g,w)=>(w.children=[],g[w.DeviceID]=w,g),{});d.forEach(g=>{const w={title:g.Name||g.DeviceID,key:`${g.DeviceID}-${g.ParentID||a.ID}`,children:[],Name:g.Name,DeviceID:g.DeviceID,ID:a.ID,DeviceName:a.DeviceName,selectable:!0,LiveStatus:g==null?void 0:g.LiveStatus,disabled:!1},A=v[g.ParentID];A?(A.selectable=!1,A.children.push(w)):o.push(w)})}return o};function Et(h){return h.reduce((a,o)=>{const{children:d=[],...v}=o;return a.concat([{...v}],Et(d))},[])}export{qe as A,ji as B,ye as C,ur as D,eo as F,Be as V,Yi as W,Gi as a,Zi as b,Pe as c,Te as d,Qi as e,Ki as f,Xi as g,cr as h,qi as i,Ji as s,ro as u};
